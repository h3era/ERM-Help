<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Cтруктура героя</title></head>
<LINK REL="stylesheet" MEDIA="screen" TYPE="text/css" HREF="../style.css">
<script language="JScript" src="../Rec/script.js"></script></head>
<body scroll="no">
<div>
<p align="left">
<font size="5">Cтруктура героя на карте приключений</font></p>
<p>&nbsp;&nbsp;&nbsp;<code id="WT">HEX-конвертер:</code> <input type="text" size="4" maxlength="4" id="inputHex" onchange="document.getElementById('inputDec').value = parseInt(this.value, 16);" onkeyup="document.getElementById('inputDec').value = parseInt(this.value, 16);" title="Введите hex-значение нужного вам смещения..">
<input type="text" id="inputDec" class="obj_in" size="5" title="10-тичное значение указанного вами смещения"></p>
<p><div id="Q1">Все смещения указаны в hex-нотации.</div></p></div>

<div style="overflow:auto; height:100%">
<pre>   // <b id="dred">+00</b> dw = X координата
   // <b id="dred">+02</b> dw = Y координата
   // <b id="dred">+04</b> dw = L уровень, старшая часть Y (Y&lt;&lt;2&gt;&gt;C)
   // <b id="dred">+06</b> db = 1: есть на карте (вне фокуса или не активен)
<small>Byte  _u1[17];</small>
<small>Dword MapItemXYZ[4];</small>
   // <b id="dred">+07</b> db = X
   // <b id="dred">+08</b> db = (?) мусор (к X)
   // <b id="dred">+09</b> db = Y
   // <b id="dred">+0A</b> db = L(?) мусор (к Y)
   // <b id="dred">+0B</b> db = ?
<small>Byte  _u1;</small>
   // <b id="dred">+0C</b> dd - тип объекта, на котором герой стоит
<small>PlOType;</small> // dd +1E с карты
   // <b id="dred">+10</b> db - бит занятости во флагах поверхности (0x0C)
<small>Pl0Cflag;</small> // этот бит означает, что здесь есть/была точка входа (жёлтая клетка)
   // <b id="dred">+14</b> dd - Контрольное слово объекта, на котором герой стоит
<small>PlSetUp;</small> // dd +0 с карты
   // <b id="dred">+18</b> dw = баллы заклинаний
   // <b id="dred">+1A</b> dd = номер подтипа (конкретный герой)
<small>_unk_Id;</small> // <b id="dred">+1E</b> dd = ??? Id
   // <b id="dred">+22</b> db = хозяин (цвет игрока)
<small>char   Name[13];</small> // <b id="dred">+23</b> db*D = имя героя
   // <b id="dred">+30</b> dd = <a href="javascript:void(0)" onclick="hidepic(5)" class="h">класс</a><div id="5" class="b"><blockquote id="T0">
str[8] str=(*[<i class="event">67CD08</i>])[номер подтипа *5C]
// 00000001 - 0x00 Рыцарь 
// 00000002 - 0x01 Клирик 
// 00000004 - 0x02 Рейнджер 
// 00000008 - 0x03 Друид 
// 00000010 - 0x04 Алхимик 
// 00000020 - 0x05 Волшебник 
// 00000040 - 0x06 Демон 
// 00000080 - 0x07 Еретик 
// 00000100 - 0x08 Рыцарь смерти 
// 00000200 - 0x09 Некромант 
// 00000400 - 0x0A Лорд 
// 00000800 - 0x0B Чернокнижник 
// 00001000 - 0x0C Варвар 
// 00002000 - 0x0D Боевой маг 
// 00004000 - 0x0E Хозяин зверей 
// 00008000 - 0x0F Ведьма 
// 00010000 - 0x10 Путешественник 
// 00020000 - 0x11 Элементалист 
// 00040000 - 0x12 sprite лодки (только внешне, нельзя плавать)</blockquote></div>
   // <b id="dred">+34</b> db = номер картинки портрета (0..156)
   // <b id="dred">+35</b> db = намеченная коорд. X куда побежать
   // <b id="dred">+39</b> db = намеченная коорд. Y куда побежать
   // <b id="dred">+3D</b> db = уровень на карте, где намечен путь перемещения
<small>Byte  _u2[15];</small>
   // <b id="dred">+3E</b> db - ??? <i class="event">4E3BB5</i> - используется для подсчёта Удачи
   // <b id="dred">+44</b> db = базовый X для патрулирования (FF = не ограничен)
   // <b id="dred">+45</b> db = базовый Y для патрулирования (FF = не ограничен)
   // <b id="dred">+46</b> db = радиус патрулирования (FF = не ограничен)
   // <b id="dred">+47</b> db = ???
   // <b id="dred">+48</b> 8*bb <a href="javascript:void(0)" onclick="hidepic(4)" class="h">флаги</a> (<i class="event">463253</i>)<div id="4" class="b"><blockquote id="T0">
// 01 - тип группировки юнитов
// 02 - разрешена тактика для героя</blockquote></div>
   // <b id="dred">+49</b> dd = полное перемещение начальное
   // <b id="dred">+4D</b> dd = оставшиеся перемещения
   // <b id="dred">+51</b> dd = опыт
   // <b id="dred">+55</b> dw = уровень
<small>Visited[10];</small> // <a href="javascript:void(0)" onclick="hidepic(3)" class="h">Флаги посещения объектов</a> (как <a href="../Rec/HE.htm#V" target="main">HE:V</a>)<div id="3" class="b"><blockquote id="T0">
// * bitfields of 32 visited object types per hero
// <b id="dred">+57</b> dd Камень знаний (1=посещён, 2=нет)
// <b id="dred">+5B</b> dd Башня Марлетто
// <b id="dred">+5F</b> dd Сад откровения
// <b id="dred">+63</b> dd Лагерь наёмников
// <b id="dred">+67</b> dd Звёздное колесо
// <b id="dred">+6B</b> dd Древо знаний
// <b id="dred">+6F</b> dd Библиотека просвещения
// <b id="dred">+73</b> dd Арена
// <b id="dred">+77</b> dd Школа магии
// <b id="dred">+7B</b> dd Школа войны</blockquote></div>
<small>_u4[18];</small> // <b id="dred">+7F</b> db
<small>int   Ct[7];</small> // <b id="dred">+91</b> dd*7 = тип существ (-1 = нет)
<small>int   Cn[7];</small> // <b id="dred">+AD</b> dd*7 = кол-во
<small>SSkill[28];</small> // <b id="dred">+C9</b> db*1C = <a href="javascript:void(0)" onclick="hidepic(1)" class="h">уровень вторич.навыков</a>
   //один байт = уровень этого навыка: 1,2,3; 0=нет<div id="1" class="b"><blockquote id="T0">
// <b id="dred">+C9</b> = Поиск пути
// <b id="dred">+CA</b> = Стрельба
// <b id="dred">+CB</b> = Логистика
// <b id="dred">+CC</b> = Разведка
// <b id="dred">+CD</b> = Дипломатия
// <b id="dred">+CE</b> = Навигация
// <b id="dred">+CF</b> = Лидерство
// <b id="dred">+D0</b> = Мудрость
// <b id="dred">+D1</b> = Мистицизм
// <b id="dred">+D2</b> = Удача
// <b id="dred">+D3</b> = Баллистика
// <b id="dred">+D4</b> = Орлиный глаз
// <b id="dred">+D5</b> = Некромантия
// <b id="dred">+D6</b> = Имущество
// <b id="dred">+D7</b> = Магия огня
// <b id="dred">+D8</b> = Магия воздуха
// <b id="dred">+D9</b> = Магия воды
// <b id="dred">+DA</b> = Магия земли
// <b id="dred">+DB</b> = Грамотность
// <b id="dred">+DC</b> = Тактика
// <b id="dred">+DD</b> = Артиллерия
// <b id="dred">+DE</b> = Обучение
// <b id="dred">+DF</b> = Нападение
// <b id="dred">+E0</b> = Оборона
// <b id="dred">+E1</b> = Интеллект
// <b id="dred">+E2</b> = Волшебство
// <b id="dred">+E3</b> = Сопротивление
// <b id="dred">+E4</b> = Первая помощь</blockquote></div>
<small>SShow[28];</small> // <b id="dred">+E5</b> db*1C = порядок отображения вторич.навыков в окне героя (1,2,3,4,5,6)
   // <b id="dred">+101</b> dd = кол-во вторич.навыков
<small>RefData1;</small> // <b id="dred">+105</b> db <i class="event">4814D3</i> + &hellip;
<small>RefData2;</small> // <b id="dred">+107</b> db <i class="event">4DA466</i>
   // <b id="dred">+105</b> dd <a href="javascript:void(0)" onclick="hidepic(2)" class="h">временные модификаторы морали</a> (<a href="../Rec/HE.htm#R7" target="main">HE:R7</a>)<div id="2" class="b"><blockquote id="T0">
// нач. иниц. при найме 0xFFF9FFFF
// 00000001 - 0x00 Волшебный колодец
// 00000002 - 0x01 Конюшни
// 00000004 - 0x02 Буй
// 00000008 - 0x03 Лебединое озеро
// 00000010 - 0x04 Идол удачи (дни 1..6)
// 00000020 - 0x05 Фонтан удачи (-1 удача)
// 00000040 - 0x06 Водоворот
// 00000080 - 0x07 Оазис
// 00000100 - 0x08 Храм (дни 1..6)
// 00000200 - 0x09 Кораблекрушение
// 00000400 - 0x0A Склеп
// 00000800 - 0x0B Ветхий корабль
// 00001000 - 0x0C Пирамида
// 00002000 - 0x0D Домик фей
// 00004000 - 0x0E Фонтан молодости
// 00008000 - 0x0F Русалки
// 00010000 - 0x10 Флаг битвы
// 00020000 - 0x11 ?
// 00040000 - 0x12 В лодке (герой на воде)
// 00080000 - 0x13 ?
// 00100000 - 0x14 Сирены
// 00200000 - 0x15 Гробница воина
// 00400000 - 0x16 Максимум удачи (как <a href="../Rec/HE.htm#R6" target="main">HE:R6</a>)
// 00800000 - 0x17 Максимум морали (как <a href="../Rec/HE.htm#R5" target="main">HE:R5</a>)
// 01000000 - 0x18 WOGSHADOWFAX (чит-код на 1 млн. очков хода)
// 02000000 - 0x19 Идол удачи (день 7)
// 04000000 - 0x1A Храм (день 7)
// 08000000 - 0x1B Фонтан удачи (+1 удачи)
// 10000000 - 0x1C Фонтан удачи (+2 удачи)
// 20000000 - 0x1D Фонтан удачи (+3 удачи)
// 40000000 - 0x1E ?
// 80000000 - 0x1F ?</blockquote></div>
<small>Byte  _u6[9];</small> // <b id="dred">+109</b>
   // <b id="dred">+10D</b> db = сколько раз в этот день сколдовал Дверь измерений
   // <b id="dred">+10E</b> dd = сила, с которой сколдована Маскировка (0..3), -1 = не активно
   // <b id="dred">+112</b> dd = сила, с которой сколдован Полёт (0..3), -1 = не активно
   // <b id="dred">+116</b> dd = сила, с которой сколдовано Хождение по воде (0..3), -1 = не активно
   // <b id="dred">+11A</b> db - модиф.морали до след.битвы (оазис), накапливаются
   // <b id="dred">+11B</b> db - модиф.удачи до след.битвы
   // <b id="dred">+11C</b> db = 1, герой СПИТ
   // <b id="dred">+129</b> dd = сила, с которой сколдовано Видение (0..3), -1 = не активно
<small>int   IArt[19][2];</small> // <b id="dred">+12D</b> dd*2*13h = артефакты dd-номер, dd-номер закла (или -1) (книга 3,FF)
<small>FreeAddSlots;</small> // <b id="dred">+1C5</b> db = количество пустых доп. слотов слева
<small>char  LockedSlot[14];</small> // <b id="dred">+1C6</b>
<small>int   OArt[64][2];</small> // <b id="dred">+1D4</b> dd*2*4 = арт в рюкзаке dd-номер, dd-номер закла(или -1)
<small>Byte    OANum;</small> // <b id="dred">+3D4</b> db = число артефактов в рюкзаке
   // <b id="dred">+3D5</b> dd = пол (как <a href="../Rec/HE.htm#R2" target="main">HE:R2</a>)
   // <b id="dred">+3D9</b> db = есть настроенная биография
   // <b id="dred">+3DA</b> dd &rarr; биография
<small>Byte  _u7[12];</small> // <b id="dred">+3DE</b>
<small>Spell[70];</small> // <b id="dred">+3EA</b> db*46 = заклинание (есть/нет)
<small>LSpell[70];</small> // <b id="dred">+430</b> db*46 = уровень заклинания (&gt;=1)
<small>char   PSkill[4];</small>
   // <b id="dred">+476</b> db = Атака
   // <b id="dred">+477</b> db = Защита
   // <b id="dred">+478</b> db = Сила магии
   // <b id="dred">+479</b> db = Знания
<small>Byte  _u8[24];</small> // <b id="dred">+47A</b> * AI stuff</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div></div></body></html>