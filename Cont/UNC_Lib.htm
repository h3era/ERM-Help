<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Работа с памятью</title>
<LINK REL="stylesheet" MEDIA="screen" TYPE="text/css" HREF="../style.css">
<script src="../Rec/script.js"></script>
</head>
<body scroll="no">
<DIV id="buttonMenu">

<A style="position:absolute; right:4" href="#UP" CLASS="button" title="Вернуться к началу">&uarr;</a>

<SPAN CLASS="options">Разделы:&nbsp;&nbsp;</SPAN>

 <A HREF="#main" title="Введение" CLASS="button" style="display:inline">Введение</A>
 <A HREF="#pers" title="Работа с процентами" CLASS="button" style="display:inline">Работа&nbsp;с&nbsp;процентами</A>
 <A HREF="#base" title="Готовые решения для диалогов/интерфейса, героев, городов, битвы, существ, заклинаний, артефактов и пр." CLASS="button"style="display:inline">Готовые&nbsp;решения</A>
 <A HREF="#links" title="Перечень полезных интернет-ссылок по UN:C" CLASS="button" style="display:inline">Полезные&nbsp;ссылки</A>

</DIV>

<DIV id="text">
<a name="up"></a><h2 align="center">Работа с памятью: UN:C/SN:E<a href="../ERA/index.htm" title="Работает только с ERA.."><img src="../Img/era.gif" class="TE"></a></h2>

<p>Данный материал посвящён скриптам и наборам команд с применением команды <a href="..\Rec\UN.htm#C">UN:C</a>, которые дают возможность изменять в игре то, что не возможно сделать через &quot;обычный&quot; ERM.
Здесь также будут показаны решения реализации требуемого с применением команды <a href="..\Rec\SN_era.htm#E">SN:E</a>.</p>

<p id="Q1">Простые наборы UN:C-команд можно преобразовать в bin-патч, воспользовавшись <a href="https://tools.hmm35.ru/unc-to-bin/index.html" target="_blank">онлайн сервисом</a>.</p>
<h3><a name="main"></a>Введение</h3>
<p>Команда UN:C#1/#2/$3 позволяет прочитать/записать участок памяти, начиная с адреса #1, длиной #2 в/из переменную $3. Первые 2 параметра самые важные. Неправильная запись в них почти всегда гарантированно вызовет вылет из игры.<br>
Разберём подробнее параметры:<br>
<b>#1</b> - это адрес участка памяти. Он может быть как статический, так и динамический. Ниже в статье будут указаны только статические адреса (эти адреса всегда одинаковы при запуске игры на любом из ПК, будь то ваш, или друга). Если же нужно будет изменить что-то в динамическом адресе (это адреса, которые на вашем ПК и у друга всегда разные), то обязательно будут указаны способы выхода на последние через статический адрес. По другому выйти на динамический адрес на разных компьютерах невозможно.<br>
<b>#2</b> - это размер третьего параметра или кол-во байт, которые нам необходимо изменить. Здесь может быть 1, 2 или 4 байта.<br>
<b>$3</b> - это непосредственно сам параметр, который мы и намереваемся изменить, чтобы добиться какой-то &laquo;плюшки&raquo;. Этот параметр может иметь как положительное значение, так и отрицательное.<br>
<u>Пример</u>:
<script type="erm">!!UN:C7783293/4/37; командир Паладин (заклинание "Лечение")</script>
В коде игры WoG по адресу <i class="event">76C37D</i> установлено заклинание №25h для командира Паладин. Данные адреса имеют шестнадцатиричную систему исчисления. 
Команда UN:C поддерживает только десятичную систему. Перевести эти числа в десятичную не сложно: 
включите обычный &laquo;виндовский&raquo; калькулятор, нажмите &quot;Вид&rarr;Программист&quot;, поставьте галочку на &quot;Hex&quot;, введите &quot;76C37D&quot;, 
после этого нажмите &quot;Dec&quot;. В итоге результат будет представлен числом 7783293. Вот мы и научились переводить шестнадцатиричное число в десятичное ;-)<br>
Итак:<br>
<b>7783293</b> – это адрес, в котором мы меняем интересующее нас значение/параметр;<br>
<b>4</b> – кол-во байт для изменения;<br>
<b>37</b> – то, что именно нам нужно поменять.<br>
Т.о., <b id="erm"><font class="re">!!UN</font>:C7783293/4/48;</b> позволит Паладину накладывать на дружественных существ Молитву (48).</p>
<p>Не забывайте, что почти все указанные в статье константные ресиверы UN:C необходимо грузить в событии <a href="../ERA/new_events.htm#2.15" class="event">OnGameEnter</a>.<br>
<u>Например</u>:
<script type="erm">!?FU(OnGameEnter);
!!UN:C7783293/4/48;</script></p>

<h4><a name="pers"></a>Работа с процентами</h4>
<p>Если игра использует проценты, то нельзя просто написать 30%, надо перевести на понятный программе язык. Это можно сделать 3 путями (работает с навыками Волшебство и т.д.):</p>
<ol>
<li>Самому посчитать проценты, используя калькуляторы:<br>
Сначала переводим проценты, например 0.5 (50%) в <a href="https://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml" target="_blank">Binary32</a>, 
затем полученное hex-значение 3F000000 – в 10-чную систему (например, <a href="../Form/16to10.htm" target="form">здесь</a>) 
и уже результат 1056964608 используем в ERM вместо y1.
<script type="erm">ZVSE
!?FU7700;
** волшебство 10\25\50
!!UN:C6548092/4/1036831949; 10
!!UN:C6548096/4/1048576000; 25
!!UN:C6548100/4/1061158912; 75
** end</script></li>

<li>ERM сам считает проценты:
<script type="erm">!?FU7700;
!!VRe1:S30 :100; [задаём 30\100 = 30%]
!!SN:X?y1 Xe1 X?y2 Xy1; [конвертация величин для записи в память]
!!UN:C6548100/4/y2; [записываем в память]</script></li>

<li>Для навыков есть специальная удобная функция: !!FU7703
<script type="erm">ZVSE
!?FU7700;
** некромантия 10\15\20 было 10\20\30
!!FU7703:P12/1/10 P12/2/15 P12/3/20;
** волшебство 10\20\30 было 5\10\15
!!FU7703:P25/1/10 P25/2/20 P25/3/30;
** сопротивление 10\20\30 было 5\10\20
!!FU7703:P26/1/10 P26/2/20 P26/3/30;
** end</script></li></ol>
<p>Не все процентные показатели можно поменять способом выше. Такие параметры, как бонусы атаки и защиты используют значения из массива. Соответственно, надо знать определённый массив, чтобы им подменить существующий.
<script type="erm">ZVSE
!?FU7700;
; 6535680 - 25%
; 6554608 – 75%
** кавалерийский бонус 25% вместо 5%
!!UN:C4468887/4/6535680;
!!UN:C4468961/4/6535680;
** end</script></p>

<h3><a name="base"></a>Готовые решения</h3>

<p>При работе с памятью очень часто возникает необходимость &laquo;иметь под рукой&raquo; вот такие данные:
<script type="erm">; Указатели основных менеджеров игры
!!UN:C6918840/4/?y1;  Менеджер Карты Приключений
!!UN:C6919200/4/?y1;  Менеджер Битвы
!!UN:C6919480/4/?y1;  Главный Менеджер Игры
!!UN:C6918864/4/?y1;  Менеджер Игрового Окна
!!UN:C6919500/4/?y1;  Менеджер Всех Городов</script>

<script type="erm">; Получение адреса z-переменной
!?FU(VarZ_GetPtr);
; x1 - номер z-переменной
!!VRx2:Sx1 *512 +9597416;</script>

<script type="erm">; Получение адреса v-переменной
!?FU(VarZ_GetPtr);
; x1 - номер v-переменной
!!VRx2:Sx1 *4 +8943204;</script>

<script type="erm">; Прочитать текст из игровых текстовых файлов
!?FU(TXT_GetString);
; x1 - номер текстового файла (см.ниже)
; x2 - номер строки
!!UN&x1=0:C6970820/4/?y1;    o_GENRLTXT_TXT
!!UN&x1=1:C6908520/4/?y1;    o_ADVEVENT_TXT
!!UN&x1=2:C6909120/4/?y1;    o_ARTEVENT_TXT
!!UN&x1=3:C6976900/4/?y1;    o_PLCOLORS_TXT
!!UN&x1=4:C6972152/4/?y1;    o_TCOMMAND_TXT
!!UN:Cy1/32/4/?y2;
!!VRx2:-1 *4;
!!UN:Cy2/x2/4/?y3;
!!SN:X?y4 Xy3 X?z1 Xy4;
!!IF:M^%Z1^;</script>
Но, как вы понимаете, это лишь малая часть того, что вам так или иначе сможет понадобиться в процессе моддинга. 
Ниже вам будет представлена довольно обширная база скриптов, которые вы сможете применить для себя на разных игровых платформах (WoG/TE/ERA)&hellip;</p>
<ul style="font-size:17">
<li><p><a name="game"></a><a href="javascript:void(0)" onclick="hidepic(9)" class="h">Все игровые опции</a><div id="9" class="b">
<table border="0"><tr><td><script type="erm">!!UN:C6919184/4/$;
!!UN:C6916016/4/$;
!!UN:C6916020/4/$;
!!UN:C6916024/4/$;
!!UN:C6916028/4/$;
!!UN:C6916012/4/$;
!!UN:C6916008/4/$;
!!UN:C6916036/4/$;
!!UN:C6916040/4/$;
!!UN:C6916044/4/$;
!!UN:C6916048/4/$;
!!UN:C6916052/4/$;
!!UN:C6916056/4/$;
!!UN:C6916060/4/$;
!!UN:C6916064/4/$;
!!UN:C6919540/4/$;
!!UN:C6919544/4/$;
!!UN:C6919548/4/$;
!!UN:C6919552/4/$;
!!UN:C6916088/4/$;
!!UN:C6916152/строка/$;
!!UN:C6916199/строка/$;
!!UN:C6916032/4/$;
!!UN:C6916108/4/$;
!!UN:C6916112/4/$;
!!UN:C6916116/4/$;
!!UN:C6916120/4/$;
;
!!UN:C6916068/4/$;
!!UN:C6916072/4/$;
!!UN:C6916076/4/$;
!!UN:C6916080/4/$;
!!UN:C6916084/4/$;
!!UN:C6916156/4/$;
!!UN:C6916092/4/$;
!!UN:C6916096/4/$;
!!UN:C6916100/4/$;
!!UN:C6916104/4/$;
!!UN:C6915604/4/$;
!!UN:C6916232/4/$;</script></td>
<td><script type="erm">	SHOW_INTRO_OPT
	MUSIC_VOLUME_OPT
	SOUND_VOLUME_OPT
	LAST_MUSIC_VOLUME_OPT
	LAST_SOUND_VOLUME_OPT
	WALK_SPEED_OPT
	COMP_WALK_SPEED_OPT
	SHOW_ROUTE_OPT
	MOVE_REMINDER_OPT
	QUICK_COMBAT_OPT
	VIDEO_SUBTITLES_OPT
	TOWN_OUTLINES_OPT
	ANIMATE_SPELLBOOK_OPT
	WINDOW_SCROLL_SPEED_OPT
	BLACKOUT_COMPUTER_OPT
	FIRST_TIME_OPT
	TEST_DECOMP_OPT
	TEST_READ_OPT
	TEST_BLIT_OPT
	BINK_VIDEO_OPT
	UNIQUE_SYSTEM_ID_OPT
	NETWORK_DEF_NAME_OPT
	AUTOSAVE_OPT
	SHOW_COMBAT_GRID_OPT
	SHOW_COMBAT_MOUSE_HEX_OPT
	COMBAT_SHADE_LEVEL_OPT
	COMBAT_ARMY_INFO_LEVEL_OPT: инфо об отряде 
	(0 - нет, 1 - вся статистика, 2 - только заклинания)
	COMBAT_AUTO_CREATURES_OPT
	COMBAT_AUTO_SPELLS_OPT
	COMBAT_CATAPULT_OPT
	COMBAT_BALLISTA_OPT
	COMBAT_FIRST_AID_TENT_OPT
	COMBAT_SPEED_OPT
	MAIN_GAME_SHOW_MENU_OPT
	MAIN_GAME_X_OPT
	MAIN_GAME_Y_OPT
	MAIN_GAME_FULL_SCREEN_OPT
	APP_PATH_OPT
	CD_DRIVE_OPT</script></td></tr></table>
</div></p></li>
<li><p><a name="hd"></a><a href="javascript:void(0)" onclick="hidepic(1)" class="h">Работа с HD-модом</a><div id="1" class="b">
<script type="erm">; получить разрешение игры
!!UN:C4199496/2/?y1; ширина
!!UN:C4199503/2/?y2; высота</script>
<script type="erm">; узнать включен ли вообще HD-мод
!!SN:L^HD_WOG.dll^/?y1; 0 - значит НЕ включен</script>

<script type="erm">** открытие окон героев в битве по ПКМ на дефе героев
!?CM4;
!!CM:A?y1/?y2 F?y3; [координаты клика]
!!UN:C4199496/2/?y11 C4199503/2/?y12; [получить разрешение игры по X и Y]
!!VRy13:Sy11 -800 *-1 :2 +58; [получить правильные координаты X атакующего]
!!VRy14:Sy11 -800 *-1 :2 +739; [получить правильные координаты X защитника]
!!VRy15:Sy12 -600 *-1 :2 +127; [получить правильные координаты Y для обоих]
!!FU&y3<>512|y2>y15:E; [выход, если не ПКМ или клик не в том месте]
!!BA:H0/?y4 H1/?y5; [получить номера героев]
!!SN&y1<y13:E5118576/1/y4/1; [открыть окно атакующего героя]
!!SN&y1>y14/y5>-1:E5118576/1/y5/1; [открыть окно защищающегося героя]
!!CM&y1>y14/y5>-1|y1<y13:R0; [отменить стандартное действие]
** end</script>

<script type="erm">** Быстрая тактическая расстановка
!?CM4;
!!SN:L^HD_WOG.dll^/?y1 L^HD_MCR.dll^/?y2; [проверить на HD мод]
!!BU:T?y3; [проверить на тактичесую фазу]
!!FU|y1<>0/y2<>0/y3<>1:E; [выход, если не удовлетворяет]
!!CM:F?y2 I?y3 D?y4; [получить флаги клика]
!!FU|y3>10/y2<>0/y4<0/y4>186:E; [выход, если не удовлетворяет]
!!BU:Ey4/?y5; [жив ли стек, где кликнули]
!!FU&y5=-1:E; [выход, если не жив]
!!BG:N?y6 Q?y7; [текущий стек и активная сторона]
!!BMy5:I?y8 T?y9; [кол-во монстров в стеки и какая сторона]
!!FU&y9>144/y9<150:E; [выход, если боевая машина]
!!FU&y7<>y8|y6=y5:E; [выход, если стек уже активен или чужая сторона]
!!VRy5&y7=1:-21; [переход к номеру стека для защищающейся стороны]
!!CM:R0; [отмена стандартного действия]
!!UN:C6919200/4/?y1; [получить комбат мэнеджер]
!!SN:E4607760/2/y1/y8/y5; [функция: передать ход стеку]
** end</script>

<script type="erm">; отобразить текст (хинт)
; в статус баре Карты Приключений
!?FU(AdvMap_SetHintString);
; x1 - z var number
!!UN:C6918840/4/?y1;
!!VRy2:Sy1 +68;
!!UN:Cy2/4/?y2;
!!VRy3:Sx1 *512 +9597416;
!!SN:E7408539/1/6911016/512/y3;
!!SN:E6288384/2/y2/512/3/200/6911016;
!!SN:E6288864/2/y2/0/200/200;
!!UN:C4199503/2/?y4;
!!UN:C4199496/2/?y5;
!!VRy4:-44; !!VRy5: :2 +382;
!!UN:C6918864/4/?y6;
!!SN:E6304144/2/y6/8/y4/y5/14;</script>
</div></p></li>

<li><p><a name="dial"></a><a href="javascript:void(0)" onclick="hidepic(2)" class="h">Диалоги, интерфейс</a><div id="2" class="b">
<script type="erm">; определение языка (английский или русский)
!!UN:C8401436/4/?y1; [тип языка: 0-английский, 1-русский]</script>
<script type="erm">; Отключить тень диалога © Master of Puppets
; до инициализации диалога - убрать тень
!!UN:C7505216/1/2;
; после закрытия диалога - вернуть параметр тени на место
!!UN:C7505216/1/18;</script>
<script type="erm">; ИЗМЕНЕНИЕ КАДРА ДЕФА
!!UN:C6918864/4/?y1; !!VRy1:+84; !!UN:Cy1/4/?y2; [y2 - адрес текущего диалога (многие, но не все)] (_Dlg_*)
!!UN:C6918840/4/?y1; !!VRy1:+68; !!UN:Cy1/4/?y2; [y2 - адрес диалога Краты Приключений] (_DlgAdvMap_*)
!!SN:E6288816/2/[адрес_диалога]/[id_элемента]; !!VRy3:Sv1; [получить структуру элемента по id] item = (_Dlg_*)->GetItem(id)
; [id_элемента] - см.Справку "CM:I"
!!VRy4:Sy3 +52; !!UN:Cy4/4/[номер_кадра_дефа]; [изменить кадр дефа] item->def_frame_index
!!VRy4:Sy3 +56; !!UN:Cy4/4/[номер_кадра_дефа]; [для кнопки: изменить кадр нажатия] item->press_def_frame_index
; ФУНКЦИИ:
!!SN:E6286720/2/y3/[тип]/[подтип];
; тип 5, подтип 6 (показать элемент)
; тип 6, подтип 6 (скрыть элемент)
; тип 6, подтип 4 (скрыть, но оставить рабочим для клика по нему)</script>
<script type="erm">; вот так блокируются кнопки (например кнопка увольнения героя)
!!SN:E6287104/2/y3/[0 или 1]; 0-откл, 1-вкл
; после этого необходимо обновить диалог
; ибо UN:R есть не на все диалоги
!!SN:E6288864/2/y2/1/-65535/65535;</script>
<u onclick="HideIt(10)" class="h"><b>Подробнее по диалогам</b> (<u id="show10">показать</u>)</u><div id="10" class="b">
<pre class="erm" id="Q1">; параметры любого элемента диалога
; текст, картинки, кнопки и т.д.

+16   (2 байта)  id элемента; by daemon_n
+18   (2 байта)  если я правильно понял, то это косвенный id элемента в этом диалоге; by daemon_n
+20     (2 байта)  флаги;
+22     (2 байта)  состояние;
+24     (2 байта)  x;
+26     (2 байта)  y;
+28     (2 байта)  ширина;
+30     (2 байта)  высота;
+32     (4 байта)  указатель на текст в статус_баре; 
+36    (4 байта)  указатель на текст по ПКМ; 

; только для дефов и кнопок
+48  (4 байта) указатель на структуру defа;
+52  (4 байта) номер кадра дефа;
+56  (4 байта) номер кадра дефа при нажатии (если кнопка);
+60  (4 байта) отобразить зеркально: 0-нет, 1-да; <b id="N1">daemon_n</b> думает, что это номер кадра дефа при отключенной кнопке (если кнопка);
+68  (2 байта) закрывает ли диалог: 0-нет, 1-да;</pre></div>
<br><br>
<script type="erm">; Окно найма существ/боевых машин героем
...
!!OW:A-1/?y1;
!!FU8980040:Py1/132/10/133/11/134/12/135/13/1; // нанять всех нейтральных драконов в кол-ве 10...13 шт.
!!FU8980040:Py1/145/1/146/1/147/1/148/1/2; // нанять все боевые машины
!?FU8980040;
; x1 - указать номер героя
; x2/x3 - номер 1ого существа/кол-во (обязательно)
; x4/x5 - номер 2ого существа/кол-во (либо -1/0)
; x6/x7 - номер 3его существа/кол-во (либо -1/0)
; x8/x9 - номер 4ого существа/кол-во (либо -1/0)
; x10 - для существ (1), для боевых машин (2)
!!OW:A-1/?y1;
!!FU&y1<0:E;
!!SN:E6386834/1/188; !!VRy17:Sv1;
!!SN:E7411341/1/x1; !!VRy1:Sv1; !!VRy1&x10=1:+145;
!!VRy10:S10*4 +8943204; // адрес переменной v10...v13
!!VRy20:Sy10; !!VRy21:Sy10 +4; !!VRy22:Sy10 +8; !!VRy23:Sy10 +12;
!!VRv10:Sx3; !!VRv11:Sx5; !!VRv12:Sx7; !!VRv13:Sx9;
!!SN&x10=1:E5576528/2/y17/y1/0/x2/y20/x4/y21/x6/y22/x8/y23;
!!SN&x10=2:E5576800/2/y17/y1/x2/y20/x4/y21/x6/y22/x8/y23;
!!VRy11:Sv1;
!!UN:C6919504/4/?y1;
!!SN:E4917104/2/y1/y11;</script>
<script type="erm">; Fix бага, возникающего при открывании окна героя в диалоге присоединения существ
; © RoseKavalier
!?FU(OnGameEnter);
!!SN:L^EraPlugins\erm_hooker.era^/?y1;
!!FU&y1=0:E; !!SN:Ay1/^SetHook^/?y2;
!!SN:Ey2/1/6116047/(AfterShowHeroInfoDlg);
!?FU(AfterShowHeroInfoDlg);
!!UN:C6918840/4/?y1;
!!SN:E4289856/2/y1/0/0/0;</script>
<script type="erm">; Исправление неправильных кнопок:
; в диалоге таверны
!!UN:C6126282/4/6826532; iCN6432.def
; в диалоге резделения отрядов
!!UN:C4495937/4/6826532; iCN6432.def"
; убираем в арене кнопку Отмена
!!UN:C4842706/4/7;
; нет проверки на "в подземелье" (Z=1)
; это чтобы Инферно в подземелье и
; Темница на поверхности имели бонусы родной земли
!!UN:C4603972/1/235;

P.S. это секция SOD (а значит данная проблема есть на всех версиях HoMM3)</script>
<script type="erm">; Активация кнопки "Следующий герой", отключенной в ТЕ
!#UN:C4234473/4/1987433092 C4234477/1/139;
!#UN:C4234473/4/1987433092 C4234477/1/139;</script>
</div></p></li>

<li><p><a name="hero"></a><a href="javascript:void(0)" onclick="hidepic(3)" class="h">Герои</a><div id="3" class="b">
<script type="erm">; двигать героя на карте приключений
!?FU(HeroMoveOnMap);
; x1/x2/x3 - x/y/z (координаты цели)
; x4 - номер героя
; ***********************************
; проверяем активен ли этот герой
!!OW:A-1/?y1; !!FU|x4<>y1/y1=-1:E;
; действия с менеджером Карты Приключений
!!UN:C6918840/4/?y1;
!!VRy2:Sy1 +64;
!!UN:Cy2/4/7;
; пакуем координаты цели (x/y/z) в v2
!!UN:C8943213/1/0 C8943212/1/x1;
!!UN:C8943214/1/x2 C8943215/1/x3;
!!VRy2:S8943212; адрес v2 кладем в y2
; настравиваем цель герою
!!SN:E7411341/1/x4; !!VRy3:Sv1;
!!VRy4:Sy3 +53; !!UN:Cy4/4/x1;
!!VRy5:Sy3 +57; !!UN:Cy5/4/x2;
!!VRy6:Sy3 +61; !!UN:Cy6/4/x3;
; начать движение героя к цели
!!SN:E4225760/2/y1/y2;
** end</script>

<script type="erm">; блокировка/разблокировка слотов героя
; © gamecreator
!?FU[Hero_SetLockedSlots];
; x1 - номер героя [0...155]
; x2 - номер слота [0...13]
; x3 - установить замок [1], убрать замок [0] (для поз.6, 8 см.ниже)
!!UN:C6919480/4/?y1;
!!VRy2:Sx1 *1170 +136736 +y1 +454 +x2;
!!UN:Cy2/1/x3;</script>
<u onclick="HideIt(11)" class="h"><b>Нумерация слотов</b> (<u id="show11">показать</u>)</u><div id="11" class="b">
<pre class="erm" id="Q1">0 - Голова
1 - Плечи
2 - Шея
3 - Правая рука
4 - Левая рука
5 - Торс
6 - Левое кольцо / Правое кольцо [замки = 0&hellip;2]
7 - Ноги
8 - Разное 5&hellip;1 [замки = 0&hellip;5]
9 - Баллиста
10 - Тележка с боеприпасами
11 - Палатка первой помощи
12 - Катапульта (фигушки, я всегда с вами)
13 - Книга Заклинаий</pre></div><br><br>

<script type="erm">; Найм героев
!!UN:C6783308/4/2500; [стоимость героя]
; 3 - максимальное кол-во героев на карте приключений для одного игрока.
!!UN:C6127106/1/3; [найм в таверне]
!!UN:C6129162/1/3; [найм в таверне]
!!UN:C4864993/1/3; [посещении тюрьмы]
!!UN:C6116975/1/3; [вывод из города]
!!UN:C4395921/1/3; [для AI]
!!UN:C5417105/1/3; [для AI]</script>
</div></p></li>

<li><p><a name="comm"></a><a href="javascript:void(0)" onclick="hidepic(12)" class="h">Командиры</a><div id="12" class="b">
<script type="erm">; ** адрес структуры командира по номеру героя
!!VRy1:S[номер героя] *296 +42344640 +[параметр];</script>
Структуру командира см. <a href="../Form/CommStr.htm" target="form">в таблице</a>.</p>
<p>
<script type="erm">; заклинания командиров
; можно изменить только вне битвы, либо перед ней.
!!UN:C7783293/1/37; [0: Паладин]
!!UN:C7783311/1/27; [1: Знахарь]
!!UN:C7783329/1/44; [2: Храмовница]
!!UN:C7783347/1/29; [3: Суккуб]
!!UN:C7783365/1/39; [4: Пожиратель Душ]
!!UN:C7783383/1/43; [5: Зверь]
!!UN:C7783401/1/46; [6: Вождь Людоедов]
!!UN:C7783539/1/53; [7: Шаман]
!!UN:C7783554/1/58; [8: Астральный Дух]</script>
<script type="erm">; спец.способности командиров
!!UN:C7771781/1/0; [0: Паладин - Опыт]
!!UN:C7780460/1/1; [1: Знахарь - Палатки]
!!UN:C7788148/4/176; [2: Храмовница - Восстановление маны]
!!UN:C7788157/4/185; [2: Храмовница - Восстановление маны]
!!UN:C7785366/1/3; [3: Суккуб_0 - Очарование]
!!UN:C7785796/1/3; [3: Суккуб_1 - Очарование]
!!UN:C7772656/1/5; [5: Зверь - Золото]
!!UN:C7780690/1/6; [6: Вождь Людоедов - Баллиста (установка кол-ва)]
!!UN:C7789904/1/6; [6: Вождь Людоедов - Баллиста (контроль)]
!!UN:C7775876/1/7; [7: Шаман - Бонус атаки и защиты (окно командира)]
!!UN:C7783598/4/7783530; [7: Шаман - Бонус атаки и защиты (в бою). Подменить на другого командира нельзя]
!!UN:C7786301/1/8; [8: Астральный дух_0 - Пацифист]
!!UN:C7786959/1/8; [8: Астральный дух_1 - Пацифист]</script>
<script type="erm">; отключаем способности командиров
!!UN:C7710229/2/8427; [3: Суккуб - Очарование]
!!UN:C7710502/2/8683; [8: Астральный дух - Пацифизм]
!!UN:C7772712/2/37008; [5: Зверь - Бонус золота]
!!UN:C7788411/1/233; [2: Храмовница - Восстановление маны © Raistlin]
!!UN:C7788412/4/174;
!!UN:C7788416/1/144;</script>
<script type="erm">; убрать у командиров огненный щит
!!UN:C7788091/1/235;</script>
</div></p></li>

<li><p><a name="town"></a><a href="javascript:void(0)" onclick="hidepic(4)" class="h">Города</a><div id="4" class="b">
<script type="erm">; замена существа стрелковой башни
!!UN:C4614248/4/?y1; [получить базовый адрес таблицы]
!!VRy2:S[тип_города] *32 +y1; [получить адрес номера монстра]
!!UN:Cy2/4/[номер_монстра]; [у которого есть деф выстрела]</script>

<script type="erm">; Радиус обзора вышки в Башне
!!UN:C5005692/1/20;
!!UN:C5011919/1/20;
!!UN:C6026482/1/20;
; Радиус действия вуали тьмы у некров
!!UN:C5011669/1/20;
!!UN:C4854195/1/20;</script>
<script type="erm">; Преобразователь скелетов
!!VRy1:S$монстр$ *4; монстр=[0..196]
!!VRy2:S8142080+y1;
!!UN:Cy2/4/[в_кого_преобразуется];
; 56 - скелет
; 66 - чёрный рыцарь
; 68 - костяной дракон</script>
<script type="erm">!#UN:C4626915/1/7; Город, в котором ров состоит из двух клеток</script>
<h4>Постройки и их цены</h4>
<script type="erm">; увеличение численности монстров в ордах
!?FU(SetTownHordeMonsters);
; x1 - номер грода [0..8]
; x2 - номер орды:  [0..1]
; x3 - количество существ
!!UN:C6035054/4/?y1;
!!VRy2:S16*x2;
!!VRy3:S32*x1;
!!VRy1:+y2 +y3 +4;
!!UN:Cy1/2/x3;
!!VRy1:+8;
!!UN:Cy1/2/x3;</script>
<script type="erm">; получить стоимость здания
; v10 - дерево, v11 - ртуть ... v16 - золото
!?FU(Town_GetBuildingCost);
; x1 - town number on map (0...47)
; x2 - building id
; x3 - return v10-v16: ptr array: int cost[6]
!!FU(Town_GetStruct):Px1/?y1;
!!SN:E6034672/2/y1/x2/8943244;
**********************************
; хватает ли денег на постройку (активный игрок только!)
!?FU(Town_CanBuildingCost);
; x1 - town number on map (0...47)
; x2 - building id
; x3 - return: bool (0-no, 1-yes)
!!FU(Town_GetStruct):Px1/?y1;
!!SN:E4590864/3/y1/x2;
!!VRx3:Sv1;
**********************************
; разрешено ли впринципе построить это здание в городе?
!?FU(Town_CanBuildingBuilt);
; x1 - town number on map (0...47)
; x2 - building id
; x3 - return: bool (0-no, 1-yes)
!!FU(Town_GetStruct):Px1/?y1;
!!CA0/x1:R?y2 R0;
!!SN:E6033696/2/y1/x2;
!!VRx3:S0;
!!VRx3&v1<>0:S1;
!!CA0/x1:Ry2;
**********************************
; построено ли здание в городе?
!?FU(Town_IsBuildingBuilt);
; x1 - town number on map (0...47)
; x2 - building id
; x3 - return: bool (0-no, 1-yes)
!!FU(Town_GetStruct):Px1/?y1;
!!SN:E4392352/2/y1/x2/1;
!!VRx3:Sv1;
**********************************
; показать как строится здание
; только внутри экрана города
!?FU(Town_ConstractBuild_Show);
; x1 - town number on map (0...47)
; x2 - building id
!!UN:C6919500/4/?y1;
!!VRy2:Sy1 +440;
!!UN:Cy2/4/x2;
!!SN:E6123136/2/y1/x2;
**********************************
; получение структуры города
!?FU(Town_GetStruct);
; x1 - town number on map (0...47)
; x2 - return: ptr structure town
!!IF&x1<0|x1>47:M^Wrong town id.^;
!!UN:C6919480/4/?y1;
!!VRy1:+136724;
!!UN:Cy1/4/?y2;
!!VRx2:Sx1 *360 +y2;
!!IF&x2<43200000:M^{Attention!}
Error in getting town structure address.
The game may fall at any time.^;</script>
<h4>Спец.строения в городах</h4>
<script type="erm">; При изменении следующих значений не забудьте поменять их и в BldgSpec.txt
; Установка значения атаки в Храме Валгаллы
!#UN:C6021441/1/4; Подмена инкремента сложением
!#UN:C6021442/1/1; Бонус атаки от Храма Валгаллы
; Установка значения защиты в Клетке Богов Войны
!#UN:C6021666/1/4; Подмена инкремента сложением
!#UN:C6021667/1/1; Бонус защиты от Клетки Богов Войны
; Город, в котором работает Храм Валгаллы
!#UN:C6021227/1/6;
; Город, в котором работает Клетка Богов Войны
!#UN:C6021452/1/7;
; Город, в котором работает Орден Огня
!#UN:C6020842/1/3;
; Город, в котором работает Стена Знаний
!#UN:C6020661/1/2;
; Навыки, даваемые спец. строениями
; 118 - атака
; 119 - защита
; 120 - сила
; 121 - знание
!#UN:C6021437/1/118; Храм Валгаллы
!#UN:C6021445/1/118;
!#UN:C6021662/1/119; Клетка Богов Войны
!#UN:C6021670/1/119;
!#UN:C6020951/1/120; Орден Огня
!#UN:C6020943/1/120;
!#UN:C6020770/1/121; Стена Знаний
!#UN:C6020762/1/121;
; Бонус Силы от Серных Туч
!#UN:C4602236/1/2;
; Бонус Силы от Грааля Темницы
!#UN:C4602282/1/12;
; Бонус морали от Грааля Замка
!#UN:C5127772/1/2;
!#UN:C5098405/1/2;
; Бонус морали от Братства Меча
!#UN:C4500863/1/2;
; Бонус удачи от Грааля Оплота
!#UN:C5127107/1/2;
!#UN:C5100434/1/2;
; Бонус очков маны от Грааля Башни
!#UN:C4602189/2/150;
; Бонус Атаки и Защиты от Грааля Крепости
!#UN:C4602467/1/10;
; Отключить торговцев артефактами
!#UN:C6111473/2/37008; Башня
!#UN:C6111478/2/37008; Темница
!#UN:C6111483/2/37008; Сопряжение
; Университет Магии в Сопряжении:
!#UN:C6110754/1/2; Номер города, в котором он работает равен 6+[значение] (в оригинале 2, так что 8)
!#UN:C6110754/1/1; Если поставить 1, Университет переедет в Крепость и будет работать по нажатию на Знаки Страха
!#UN:C6110754/1/-1;Если поставить -1, Университет переедет в Темницу и будет работать по нажатию на Вихрь маны
!#UN:C6110754/1/5; Чтобы отключить Университет, можно поставить несуществующий индекс города (6+5=11). Подсказка при этом останется
; Кстати, навыки, которые там даются, тоже можно редактировать - см. адреса здесь: https://forum.df2.ru/index.php?s=&showtopic=6803&view=findpost&p=429783
; Альтернативный способ отключить Университет Магии. В первом случае убирается проверка на Сопряжение, сейчас - последующее действие
!#UN:C6110755/2/37008;
!#UN:C6110757/4/2425393296;
; Отключить Университет Магии для ИИ
!#UN:C5398076/1/144;
!#UN:C5398077/4/2425393296;
; Отключить Преобразователь Скелетов
!#UN:C6111184/1/144;
!#UN:C6111185/4/2425393296;
; Отключить Гильдию наемников
!#UN:C6110986/1/144;
!#UN:C6110987/4/2425393296;
; Отключить Двор Баллист
!#UN:C6111157/1/144;
!#UN:C6111158/4/2425393296;
; Отключить Врата Замка
!#UN:C6111142/1/144;
!#UN:C6111143/4/2425393296;
; Отключить открытие Таверны при нажатии на Братство Меча
!#UN:C6111068/1/144;
!#UN:C6111069/4/2425393296;
; Отключение Конюшен
!#UN:C6020509/2/37008;
; Отключить Маяк
!#UN:C5131612/1/235;</script>
<script type="erm">; Отключение функций спец.построек Крепости
!?PI;
!!UN:C6021452/1/99; Клетка Богов Войны (вместо седьмого города проверяем девяносто девятый)
!!UN:C4602370/1/0; Обнуляем бонус атаки от Обелиска Крови
!!UN:C4602421/1/0; Обнуляем бонус защиты от Знаков Страха
; Отключение функций спец.построек Темницы
!?PI;
!!UN:C6130651/1/18; Отключение Портала Вызова
!!UN:C6130708/1/52;
!!UN:C5016380/1/86;
!!UN:C5362353/1/120;
!!UN:C6055202/1/144;
!!UN:C6020334/1/255; Отключение Водоворота Маны
!!UN:C6021023/1/255; Отключение Академии Боевых Исскуств
!!UN:C6111477/1/6; Отключение Торговцев Артефактами (с ним не получится отключить Сопряжение)</script>
<h4>Работа с экраном города</h4>
<script type="erm">!!SN:E6103344/3/[номер героя визитера]/[тип города]; // открыть кузницу.
** открытие окон спецпостроек в городах
!!UN:C6919500/4/?y1; // o_TownMgr
; общее:
!!SN:E6106032/2/y1; // вход в Городской Холл (окно построек зданий) © MoP
; 3 (инферно)
!!SN:E6129792/2/y1; // Врата Замка
; 4 (некрополис)
!!SN:E6108048/2/y1; // СкелетТрансформер
; 5 (темница)
!!SN:E6106448/2/y1; // Окно портала вызова существ
; 6 (цитадель)
!!SN:E6202016/2/y1; // Гильдию наемников
; 8 (Сопряжение)
!!SN:E6107552/2/y1; // Университет магии
; 2, 5, 8 (Башня, Темница, Сопряжение)
!!SN:E6201632/2/y1; // Торговцы артефактами</script>

<script type="erm">!!UN:C6919500/4/?y1; // o_TownMgr
!!SN:E6117680/2/y1; // обновить экран города (желтая обводка, кнопки)
!!SN:E6117392/2/y1; // обновить экран города (постройки)</script>

<b><u>Комментарий</u>:</b> при замене анимации нужно также записать в память новое количество кадров.
<script type="erm">[Установка количества кадров в анимации]
!?FU(SetFrames);
; x1 - тип города
; x2 - номер здания
; x3 - количество кадров в анимации
!!VRy1:Sx1 *44 +x2 *6;
!!VRy2:S6859276 +y1;
!!UN:Cy2/2/x3;

[Получение количества кадров в анимации]
!?FU(GetFrames);
; x1 - тип города
; x2 - номер здания
; x3 - номер v-переменной
!!VRy1:Sx1 *44 +x2 *6;
!!VRy2:S6859276 +y1;
!!UN:Cy2/2/?vx3;</script>

<script type="erm">Перемещение зданий:
[Установка координат здания]
!?FU(SetBuilding'sPosition);
; x1 - тип города
; x2 - номер здания
; x3 - координата х
; x4 - координата у
!!VRy1:Sx1 *44 +x2 *6;
!!VRy2:S6859276 +2 +y1;
!!UN:Cy2/2/x3;
!!VRy2:+2;
!!UN:Cy2/2/x4;

[Получение координат здания]
!?FU(GetBuilding'sPosition);
; x1 - тип города
; x2 - номер здания
; x3 - номер v-переменной для хранения значения х
; x4 - номер v-переменной для хранения значения у
!!VRy1:Sx1 *44 +x2 *6;
!!VRy2:S6859276 +2 +y1;
!!UN:Cy2/2/?vx3;
!!VRy2:+2;
!!UN:Cy2/2/?vx4;</script>

<script type="erm">Приоритет отображения:
[Установка приоритета здания]
!?FU(SetBuilding'sPriority);
; x1 - тип города
; x2 - приоритет(0-43)
; x3 - номер здания
!!VRy1:Sx1 *44 +x2;
!!VRy2:S6565572 +y1;
!!UN:Cy2/1/x3;
[Получение приоритетов зданий города]
!?FU(GetPriorities);
; x1 - тип города
!!VRv1:Sx1 *44;
!!DO(ShowRes)/0/43/1:P;
!?FU(ShowRes);
!!VRy1:Sv1 +x16;
!!VRy2:S6565572 +y1;
!!UN:Cy2/1/?y3;</script>
</div></p></li>

<li><p><a name="batl"></a><a href="javascript:void(0)" onclick="hidepic(5)" class="h">Битва</a><div id="5" class="b">
<script type="erm">; Бесследно убрать стек с поля боя
; x1 - номер стека который неоходимо уничтожить
!!UN:C6919200/4/?y1; [Менеджер битвы]
!!VRy2:Sx1 *1352 +21708 +y1; [структура стека]
!!VRy3:Sy2 +234; !!UN:Cy3/1/1; [указываем, что стек умер]
!!BMx1:F?y4; [получаем флаги стека]
!!VRy4:|268435456; [ставим флаг "принесён в жертву"]
!!BMx1:N0 Fy4; [кол-во: 0, и устанавливаем флаги стеку]
!!SN:E4621680/2/y1/51/1; [функция "убрать тело", если мёртв]
!!SN:E4797616/2/y1/0/1; [обновить сетку поля боя]</script>
<script type="erm">;** Баллиста стреляет перед башнями.
!!UN:C4606831/1/145;
!!UN:C4606842/1/145;
!!UN:C4606861/1/149;
!!UN:C4606872/1/149;</script>
<h4>Разные константные значения</h4>
<script type="erm">; отключение сообщения тактики в начале боя
; 0x462D98 JMP SHORT 0x462DCA
!#UN:C4599192/2/12523;
!#UN:C4599194/4/2425393296;</script>
<script type="erm">; Заклинания призыва элементалей
!!UN:C5906498/1/<new monster ID> - summonning fire el. sp.
!!UN:C5906519/1/<new monster ID> - summonning earth el. sp.
!!UN:C5906540/1/<new monster ID> - summonning water el. sp.
!!UN:C5906561/1/<new monster ID> - summonning air el. sp.
; допускается ID монстра в диапазоне 0..127</script>
<script type="erm">** Оковы Войны (в бою с нейтралами можно убежать с поля боя)
!?BG0; [перед действием в битве]
!!BG:A?y1; [узнать тип действия]
!!BA:H1/?y2; [узнать героя защитника]
!!UN&y1=4/y2=-2:C4689325/1/2; [подменить на грааль (а он в рюкзаке)]
!?BA53; [после битвы]
!!UN:C4689325/1/125; [вернуть номер арта]</script>
<script type="erm">; ** стрельба
!!UN:C4617008/1/10; - дистанция между прямой/сломаной стрелой для стрелков (оригинал=10)
!!UN:C4617188/1/10; - при расчёте пенальти по 2ой клетке двуклеточного
!!UN:C4617219/1/10; - при расчёте пенальти по 2ой клетке двуклеточного</script>
<script type="erm">; ** отключить появление грейдженного стека в битве против нейтралов
!!UN:C4899920/1/8; (оригинал =1)</script>
<script type="erm">; Отключение бесплатной дипломатии (бесплатно -> за золото)
!!UN:C4289079/4/3; [при ПКМ на монстре (оригинал = 2) ]
!!UN:C4879709/1/-21; [при атаке на монстра (оригинал =127)]</script>
<script type="erm">!!UN:C4468887/4/6554608; !!UN:C4468961/4/6554608; % увеличения урона чемпионов за 1 гекс (тут 75%)
!!UN:C4468973/4/y1; "потолок" бонуса атаки (orig 400%)
!!UN:C4468961/4/y1; влияние бонуса атаки на урон (orig 5%)
!!UN:C4471030/4/y1; влияние бонуса защиты на урон (orig 2.5%)
!!UN:C4471048/4/6535360; min deff bonus =97.5% /100-2,5%/ (orig =70% /100-30%/) разве 30%? непонятно</script>
</div></p></li>

<li><p><a name="mons"></a><a href="javascript:void(0)" onclick="hidepic(6)" class="h">Существа</a><div id="6" class="b">
<script type="erm">; Функция для смены визуального типа летящего снаряда
; для существущих стрелков
!?FU(Monstre_SetFlyingShell);
; x1 - номер существа (0...196)
; x2 - тип снаряда (0...15)
!!VRx1:+7994814;
!!UN:Cx1/1/x2;</script>
Типы снарядов см. <a href="../Form/weapon.htm" target="form">в таблице</a>.</p>
<p><script type="erm">; Функция для смены озвучки существ
!?FU(Monstre_SetSound);
; x1 - номер существа (0...196)
; z1 - название озвучки (например: VRz1:S^monk^)
!!UN:C4697553/4/?y1;
!!VRy2:S116*x1+y1+8;
!!UN:Cy2/4/?y3;
!!SN:K4/?z1/y3/1;</script>
<script type="erm">!!UN:C5133672/1/2; ** Повышение цены заклинаний, если у противника Пегасы
!!UN:C4608374/1/-2; ** Количество маны, которое вытягивают Призраки у враж. героя
;** Значения выше и ниже которых мораль не влияет на шанс повторного хода
;** Положительная мораль (шанс 3 из 24)
!!UN:C4605318/1/3;
!!UN:C4605344/1/3;
!!UN:C4605354/1/24; Размер вероятности положительной морали (24)
;** отрицательная мораль (шанс 3 из 12)
!!UN:C4605324/1/-3;
!!UN:C4605331/1/-3;
!!UN:C4605854/1/12; Размер вероятности отрицательной морали (12)
;** если установить 6, то Значок Смелости вместе с навыком Лидерства дадут 6\24 = 25% срабатывания морали, в норме всё, что выше 3, не учитывается</script>
<script type="erm">;** Значение, к которому прибавляется навык Грамотности, чтобы определить уровень заклинаний для изучения
;** (на 3 уровне навыка можно учить заклинания 4 уровня)
!!UN:C4859491/1/1;
;** Номер существа воскрешаемого ПитЛордами из трупов (48 - Демон)
;** кол-во вызываемых существ не зависит от их здоровья
!!UN:C5928811/1/48;</script>
<script type="erm">; Сила воскрешения Архангелов.
!!UN:C4485241/1/3 C4489947/1/3 C5932992/1/3 C4485546/1/3;
1 = 50 hp
2 = 100 hp
3 = 200 hp
4 = 400 hp</script>
<h4>Шансы срабатывания способностей</h4>
<script type="erm">;** Шанс срабатывания Старости у призрачного дракона (из 100)
!!UN:C4457044/1/100; 100 верхний диапазон
!!UN:C4457049/1/1; 1 нижний диапазон
!!UN:C4457060/1/20; 20 шанс
;** Кислотное дыхание Ржавого Дркона (из 100)
!!UN:C4461006/1/100; 100 верхний диапазон
!!UN:C4461011/1/1; 1 нижний диапазон
!!UN:C4461022/1/20; 20 шанс
;** Двойной урон Рыцаря Смерти(из 100)
!!UN:C4470496/1/20; 20 шанс
;** Шанс срабатывания Болезни у Зомби (из 100)
!!UN:C4457161/1/100; 100 верхний диапазон
!!UN:C4457166/1/1; 1 нижний диапазон
!!UN:C4457177/1/100; 20
;** Шанс срабатывания Ослепления у Удинорогов и Алмазных драконов (из 100)
!!UN:C4457262/1/100; 100 верхний диапазон
!!UN:C4457267/1/1; 1 нижний диапазон
!!UN:C4457278/1/100; 20
;** Шанс срабатывания Окаменения у Медуз, Василисков и Баронов ада (из 100)
!!UN:C4457623/1/100; 100 верхний диапазон
!!UN:C4457628/1/1; 1 нижний диапазон
!!UN:C4457639/1/100; 20
;** Шанс срабатывания Яда у Вивернов-монархов (из 100) мумия?
!!UN:C4457808/1/100; 100 верхний диапазон
!!UN:C4457813/1/1; 1 нижний диапазон
!!UN:C4457824/1/100; 30
;** Шанс срабатывания Паралича у Скорпикор (из 100)
!!UN:C4457921/1/100; 100 верхний диапазон
!!UN:C4457926/1/1; 1 нижний диапазон
!!UN:C4457937/1/100; 20</script></div></p></li>

<li><p><a name="spel"></a><a href="javascript:void(0)" onclick="hidepic(7)" class="h">Заклинания</a><div id="7" class="b">
<script type="erm">!!UN:C5901022/4/y1; длительность силового поля
!!UN:C5901337/4/y1; длительность огненной стены
!!UN:C4474421/4/y1; длительность разрушающего луча, берсерка и корней (по умолчанию 255)
!!UN:C4474421/4/3; установить длительность разрушающего луча, берсерка и корней в 3 хода
; длительность берсерка равна силе заклинания
!!VRv1:S4477144 +59 -47; адрес берсерка (заклинание 59)
!!UN:Cv1/1/2; длительность берсерка равна силе заклинания
; расход MP при касте Городского Портала
!!UN:C4314399/4/300; Школа Земли 1-2 уровень
!!UN:C4314420/4/200; Эксперт Земли
!!UN:C4314836/1/2; Уровень магии земли, при котором герой может выбирать город, используя ГП
; расход MP при касте Двери Измерений
!!UN:C4314143/4/200; Школа Воздуха эксперт
!!UN:C4314140 /1/100; Добавочный 100 очков, если не эксперт
;** Радиус берсеркера на 0\0\1\2 уровне навыка магии огня
;** при значении выше 2 будут графические глюки + срабатывает только при наведении на цель
!!UN:C6562420/1/0;
!!UN:C6562424/1/0;
!!UN:C6562428/1/1;
!!UN:C6562432/1/2;</script>
<h4>Установка прозрачности анимациям заклинаний</h4>
<script type="erm">!!UN:C4454270/4/?y1;	адрес таблицы
!!VRy2:S<номер заклинания> *12 +9;
; ПРИМЕР: <67> - номер заклинания ЯД (номера смотреть в описании по BM:V)
!!VRy1:Sy1 +y2;
!!UN:Cy1/1/<флаг прозрачности>;	флаг прозрачности (поставить <1> , убрать <0>)</script>
</div></p></li>

<li><p><a name="arts"></a><a href="javascript:void(0)" onclick="hidepic(8)" class="h">Артефакты</a><div id="8" class="b">
<script type="erm">; + к раундам длит закла
!!UN:C5132392/4/1; магическое ожерелье (+1)
!!UN:C5132455/4/2; магическое кольцо (+2)
!!UN:C5132517/4/3; магическая накидка (+3)
!!UN:C5132581/4/50; кольцо мага (+50)
; Грохот титана
!!UN:C5085076/1/57; его заклинание (57)
; Плащ короля нежити
!!UN:C5127994/4/56; скелет (56) без нав. Чародейство
!!UN:C5127987/4/58; живой мертвец (58) для баз. Чародейство
!!UN:C5127978/4/60; страж (60) для продв Чародейство
!!UN:C5127967/4/64; лич (64) для эксп Чародейство
; Альянс Ангелов (автокаст заклинания)
!!UN:C4607960/1/48; молитва (48)
!!UN:C4607983/1/48; молитва (48)
!!UN:C4607973/1/48; длительность в раундах (10)
; Доспехи Проклятого (автокаст заклинания)
!!UN:C4608025/1/54 C4608048/1/54 C4608038/1/50; Медлительность (54)
!!UN:C4608070/1/42 C4608093/1/42 C4608083/1/50; Проклятье (42)
!!UN:C4608115/1/45 C4608138/1/45 C4608128/1/50; Слабость (45)
!!UN:C4608160/1/52 C4608183/1/52 C4608173/1/50; Неудача (52)</script>
<script type="erm">; Получить структуру героя в v1
!!SN:E7411341/1/[номер героя];
; проверка надет ли арт: возвращает (v1 = 0...1)
!!SN:E5084256/2/[структура героя]/[артефакт];
; удалить артефакт в определенном слоте
!!SN:E5123648/2/[структура героя]/[слот];</script>
<script type="erm">; получить/изменить название и описание артефакта
!!UN:C6687592/4/?y2; [ссылка на таблицу артефактов]
!!VRy3:S[номер арта] *32 +y2 (+16); [+16 - для описания артефакта]
!!UN:Cy3/4/?y1; [y1 - адрес ссылки на название (описание)]</script>
</div></p></li></ul>
<hr noshade>
<p><a name="links"></a>Также, в сети Internet доступно ещё больше готовых решений с применением UN:C. Стоит отметить следующие сайты:
<ul>
<li><p><u onclick="HideIt(20)" class="h"><b>WoG-форум</b> (<u id="show20">показать</u>)</u><div id="20" class="b">
&#9826 <a href="http://wforum.heroes35.net/showthread.php?tid=5118" target="_blank">Тема по UN:C</a> (основа статьи взята отсюда)<br>
&#9826 <a href="http://wforum.heroes35.net/showthread.php?tid=5972" target="_blank">Сложные скрипты</a> (справочник)<br>
&#9826 <a href="http://wforum.heroes35.net/showthread.php?tid=4734" target="_blank">Сборник готовых скриптов</a> (на английском)
</div></p>
</li>
<li><p><u onclick="HideIt(21)" class="h"><b>Форум DF2</b> (<u id="show21">показать</u>)</u><div id="21" class="b">
&#9826; <a href="http://forum.df2.ru/index.php?showtopic=6813&st=20" target="_blank">Тема по UN:C</a><br>
&#9826; <a href="http://forum.df2.ru/index.php?showtopic=34685" target="_blank">Хуки на исполняемый код</a><br>
&#9826; <a href="http://forum.df2.ru/index.php?showtopic=6803" target="_blank">Инженерный анализ</a></div></p></li>
</ul></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p></DIV>
<script src="../erm.js"></script></body></html>