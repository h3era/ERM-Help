<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>Триггер OB</title>
<LINK REL="stylesheet" MEDIA="screen" TYPE="text/css" HREF="../style.css">
<script language="JScript" src="../Rec/script.js"></script>
</head>

<body>
<p align="center">
<font size="5">Триггер <b>OB</b> (объекты)</font></p>
<p>&nbsp;</p>
<p><b><font id="red">!?OB#1/#2/#3;</font> - триггер при посещении объекта в определённой точке #1/#2/#3 (соответственно, X Y L).<br>
<font id="red">!?OB#1/#2;</font> - триггер при посещении любого объекта определённого типа и подтипа.<br>
<font id="red">!?OB#1;</font> - триггер при посещении любого объекта определённого типа.</b><br>
<p>Работает для любого объекта со &laquo;входом&raquo; (<a href="../Rec/TR.htm#E">жёлтой клеткой</a> в редакторе).<br>
<u>Примечание</u>: этот триггер включает монстров, артефакты и ресурсы, но не героев 
(для героев используйте триггер <a href="HE.htm">!?HE</a>)</p>
<p>Варианты триггеров объекта:
<ol id="T0">
<li>!?OB#1/#2/#3; - сработает при посещении объекта в определённой точке.</li>
<li>!?OB#1/#2; - сработает при посещении <a target="form" href="../Form/Objects.htm">объекта</a> типа #1 / подтипа #2</li>
<li>!?OB#1; - сработает при посещении <a target="form" href="../Form/Objects.htm">объекта</a> типа #1</li>
</ol>
Если несколько вариантов триггера !?OB используются для одного объекта, то сначала срабатывает триггер "вариант 2", 
а затем варианты "1" и "3". Варианты "1" и "3" выполняются в порядке расположения в скрипте.<br>
Когда триггер "вариант 2" срабатывает, координаты объекта записываются в v998, v999, v1000, как X Y L соответственно.<br>
Так вы можете получить координаты любых других посещаемых объектов без их указания.<br>
<u>Пример</u>:
<script type="erm">!?OB101; - любой сундук с сокровищами на карте
!!CH998:...; - изменить опции посещаемого сундука.</script>
Вы можете использовать ссылочные координаты для всех ресиверов, требующих точных координат, по такому шаблону:
<span class="erm"><b class="re">!!XX</b><b id="dred">@</b>:&hellip;;</span> , где
<pre>      <b class="re">XX</b> - имя ресивера,
      <b id="dred">@</b> = номер <i>v</i>-переменной, хранящей координату X (v[@]=X, v[@+1]=Y, v[@+2]=Уровень)</pre>
<u>Пример</u>:
<script type="erm">...
!!OB10:...; 10 - это номер v-переменной, хранящей координату X</script>
Так же можно и через <a href="../Cont/Flags.htm#var_ref">косвенные ссылки</a>:
<script type="erm">...
!!OBv11:...; значение v11 принимается как ссылка, так что v[v11]=X, v[v11+1]=Y, v[v11+2]=Уровень.</script>
</p>
<p align="center">
<font size="5">
Пост-триггер <b>OB</b></font></p>
<p><font id="red"><b>!$OB#1/#2/#3;</b></font> - пост-триггер для объекта в определённой точке на карте.<br>
<b><font id="red">!$OB#1/#2;</font></b> - пост-триггер для любого <a target="form" href="../Form/Objects.htm">объекта</a> типа #1 / подтипа #2.<br>
<font id="red"><b>!$OB#1;</b></font> - пост-триггер для любого <a target="form" href="../Form/Objects.htm">объекта</a> типа #1.<br>
Принцип действия триггера как и у обычного триггера !?OB&hellip;; но данный триггер срабатывает после выполнения стандартных свойств объекта.<br>
Например, пост-триггер используется в жилище, срабатывая после покупки любого существа.
Пост-триггер для замка сработает после конца битвы, если замок был атакован.<br>
<b><u onclick="HideIt(1)" class="h">Пример (<b id="show1">показать</b>)</u></b><div id="1" class="b">
<script type="erm">!$OB16;
; после посещения банка существ, переменные v998/v999/v1000 содержат координаты посещаемого объекта
!!CB998:G0/d/?y1 G1/d/?y2 G2/d/?y3 G3/d/?y4 G4/d/?y5 G5/d/?y6 G6/d/?y7; y1..y7 - число стражей в отрядах, охраняющих банк
!!OB998&y1=0/y2=0/y3=0/y4=0/y5=0/y6=0/y7=0:S; запрет посещения объекта для всех игроков, если ни одного стража нет (банк разграблен)</script></div></p>
<p id="Q1">См. также: ресивер <a href="../Rec/OB.htm">!!OB</a>, <a target="form" href="../Form/Objects.htm">таблица объектов</a></p>
<p>&nbsp;</p>
<script src="../erm.js"></script></body></html>