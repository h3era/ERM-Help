<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><title>
Ресивер HE</title>
<LINK REL="stylesheet" MEDIA="screen" TYPE="text/css" HREF="../style.css">
<script language="JScript" src="script.js"></script></head>

<body scroll="no">
<DIV id="buttonMenu">
<SPAN CLASS="options">Опции&nbsp;HE:&nbsp;&nbsp;</SPAN>

	<A HREF="#A" title="Контроль артефактов" CLASS="button">A</A>
	<A HREF="#B0" title="Имя, биография" CLASS="button">B</A>
	<A HREF="#C" title="Контроль армии" CLASS="button">C</A>
	<A HREF="#D" title="Диалог улучшения существ" CLASS="button">D</A>
	<A HREF="#E" title="Контроль опыта" CLASS="button">E</A>
	<A HREF="#F" title="Контроль первичный параметров" CLASS="button">F</A>
	<A HREF="#G" title="Очки передвижения (изначальные)" CLASS="button">G</A>
	<A HREF="#H" title="Армия у нанимаемого героя" CLASS="button">H</A>
	<A HREF="#I" title="Мана" CLASS="button">I</A>
	<span CLASS="buttoninactive">J</span>
	<A HREF="#K" title="Убить героя" CLASS="button">K</A>
	<A HREF="#L" title="Настройка портретов" CLASS="button">L</A>
	<A HREF="#M" title="Настройка заклинаний" CLASS="button">M</A>
	<A HREF="#N" title="Номер" CLASS="button">N</A>
	<A HREF="#O" title="Хозяин" CLASS="button">O</A>
	<A HREF="#P" title="Координаты" CLASS="button">P</A>
 <SPAN CLASS="buttoninactive">Q</SPAN>
	<A HREF="#R" title="Мораль; удача; пол" CLASS="button">R</A>
	<A HREF="#S" title="Вторичные навыки" CLASS="button">S</A>
	<A HREF="#T" title="Вызвать битву" CLASS="button">T</A>
	<A HREF="#U" title="Патруль" CLASS="button">U</A>
	<A HREF="#V" title="Контроль посещений одноразовых объектов" CLASS="button">V</A>
	<A HREF="#W" title="Очки движения (текущие)" CLASS="button">W</A>
	<A HREF="#X" title="Специальность" CLASS="button">X</A>
	<A HREF="#Y" title="Благословения и Проклятья" CLASS="button">Y</A>
	<A HREF="#Z" title="Команда возвращает адрес памяти структуры указанного героя" CLASS="button">Z</A>
	<A style="position:absolute; right:4" href="#UP" CLASS="button" title="Вернуться к началу">&uarr;</a>

</DIV>

<DIV id="text">
<a name="up"></a>
<p align="center"><font size="5">Ресивер <b>HE</b> (опции героя)</font></p>
<p><br>
<b><font id="red">!!HE#:XXXX;</font> – герой с номером #.</b> Герой - <a target="form" href="../Form/Objects.htm">тип 34</a>.<br>
Каждый герой в игре имеет свой уникальный <a target="form" href="../Form/NumberHeroes.htm">номер</a>.<br>
<i>Расширение синтаксиса:</i><br>
<font id="red"><b>!!HE#1/#2/#3:XXXX;</b></font> – герой в определённых координатах X Y L<br>
<font id="red"><b>!!HE-1:XXXX;</b></font> – герой, активировавший триггер. 
Данная команда существенно упрощает скрипт, так как вам не нужно при каждом вызове ресивера HE сохранять координаты героя.<br>
Используется для изменения характеристик, войск, инвентаря, навыков, местоположения и просто всего, что можно вообразить, над героем. 
Также позволяет наложить проклятье или благословение.<br>
<b><u>Комментарий</u>:</b> вы можете использовать косвенные ссылки на героев (копии информации):
<script type="erm">!!HE-10:...; применить изменения к атакующему герою
!!HE-20:...; применить изменения к защищающемуся герою</script></p>
<p id="Q1">См. также: триггер <a href="../Tr/HE.htm">!?HE</a></p>
<hr noshade><p>
<font id="red"><b><a name="A"></a>A#</b></font><br>
Получить/дать/убрать артефакт<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # – <a target="form" href="../Form/A1.htm">номер артефакта</a><br>
Если # &gt; 0, артефакт будет добавлен<br>
Если # &lt; 0, артефакт будет удалён из всех слотов.<br>
<i id="bold">Замечание:</i> полученный этой командой артефакт не будет одет автоматически, а будет помещён в рюкзак. 
Если же рюкзак заполнен полностью (содержит 64 артефакта), то герой указанный командой артефакт не получит.<br>
<u><b onclick="HideIt(38)" class="h">Пример (<b id="show38">показать</b>)</b></u><div id="38" class="b">
<script type="erm">!!HE106:A-1; - удалить все свитки с заклинаниями у Дессы (герой #106)</script></div>
<u><b onclick="HideIt(1)" class="h">Комментарий (<b id="show1">показать</b>)</b></u> <div id="1" class="b"><UL>
<li>Eсли вы удаляете артефакт, добавляющий заклинание герою, с помощью ERM 
(HE:A- или <a href="#A3">HE:A3</a>), заклинание исчезнет из книги героя навсегда.<br>
<li>Eсли вы удаляете артефакт командой !!HE:A-, бонусы снимутся корректно, но если вы удалите его командой HE:A3, это не уберёт бонусы.<br>
<li>Eсли вы удаляете комбо-артефакт командой HE:A-, заблокированные слоты разблокируются, но если вы удалите его командой HE:A3, блок не уберётся!</ul></div></p>
<hr noshade><p>
<font id="red"><b>A1/$1/$2</b></font><br>
Надеть артефакт<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – <a target="form" href="../Form/A1.htm">номер артефакта</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/AP.htm">позиция</a>, куда надевать<br>
Если слот занят, флаг 1 устанавливается на 0.<br>
Чтобы узнать, какой артефакт размещён в определённом слоте, используйте синтаксис получения первого параметра ($1):<br>
<b id="erm"><font class="re">!!HE</font>:A1/?@/x;</b> - где @ - <a href="../Cont/Flags.htm#var">переменная</a> для сохранения результата, 
x - номер проверяемого <a target="form" href="../Form/AP.htm">слота</a>. 
Если артефакта нет, значение переменной равно -1.<br>
<b><u onclick="HideIt(2)" class="h">Комментарий (<b id="show2">показать</b>)</u></b><div id="2" class="b"><ul>
<li>Eсли вы используете HE:A1, чтобы надеть герою артефакт, дающий какие-либо заклинания (Том магии, Свиток заклинания или Шляпу Оратора), 
то они не добавятся, пока игрок сам не снимет и не наденет обратно артефакт. 
Новая команда <a href="#A4">HE:A4</a>, добавленная в 3,58, корректно даст заклинания герою.
<li>Eсли вы используете команду HE:A1 для экипировки артефакта, он будет надет, независимо от того, блокирован ли он или занят. 
Опять же, команда HE:A4 будет надевать артефакты только на не заблокированные и не занятые слоты.</ul></div></p>
<hr noshade>
<p><font id="red"><b>A2/$1/?$2/?$3</b></font><br>
Подсчитать кол-во артефактов (получить или проверить):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – <a target="form" href="../Form/A1.htm">номер артефакта</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – получить кол-во артефактов $1 у героя (получить или проверить)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – получить кол-во артефактов $1, надетых на героя (получить или проверить)<br>
Кол-во невозможно установить. При попытке установки кол-ва ничего не произойдёт.</p>
<hr noshade><p>
<a name="A3"></a><font id="red"><b>A3/$1/$2/$3</b></font><br>
Удалить несколько копий артефакта:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – <a target="form" href="../Form/A1.htm">номер артефакта</a>&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – кол-во копий для удаления<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – удалить сначала надетые (1) или в рюкзаке (0)<br>
<b><u onclick="HideIt(39)" class="h">Комментарий (<b id="show39">показать</b>)</u></b><div id="39" class="b"><ul>
<li>Если артефакт давал заклинание, оно не удалится из книжки героя
<li>Если артефакт был удалён этой командой, то все закрытые слоты и бонусы останутся на прежних местах.
<li>Удаление этой командой не обновляет в памяти значение числа артефактов в рюкзаке, что может привести к невозможности размещения любого нового артефакта 
(даже, если номинально в рюкзаке ещё есть место; вместимость рюкзака - 64 объекта)</ul>
<u>Пример</u> от <b id="N1">Algor</b>'а:<br>
Корректное удаление надетого свитка с заклинанием.<br>
Заклинание у героя удалится, если оно давалось только этим свитком.
<script type="erm">!!HE-1:A3/y1/1/1 A4/1080 A3/1080/1/1;
; y1 - номер свитка = 1001 + [номер заклинания]</script></div></p>
<hr noshade><p>
<a name="A4"></a><font id="red"><b>A4/#</b></font><br>
Надеть <a target="form" href="../Form/A1.htm">артефакт #</a>. Теперь вы можете добавлять заклинания артефактов автоматически. 
Также решена проблема заблокированных слотов. Фактически, здесь используется внутренняя функция получения артефакта. 
Если артефакт может быть надет, он надевается.</p>
<hr noshade><p><a name="B0"></a>
<font id="red"><b>B0/$</b></font><br>
Установить/получить имя героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ - текстовая переменная.<br>
<i id="bold">Замечание:</i> в биографии имя не изменится!</p>
<hr noshade><p><a name="B1"></a>
<font id="red"><b>B1/$</b></font><br>
Установить/получить биографию героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ - текстовая переменная.<br>
Если биография или имя героя такое же, как и по умолчанию, вы получите пустую текстовую переменную, а не стандартный текст.</p>
<hr noshade><p><a name="B2"></a>
<font id="red"><b>B2/$</b></font><br>
Установить/получить класс героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – класс (<a target="form" href="../Form/HeroesClasses.htm">0..17</a>)<br>
Разделите полученное значение на 2 и вы получите <a target="form" href="../Form/Towns.htm">тип города</a> героя.<br>
<u><b onclick="HideIt(3)" class="h">Дополнительно (<b id="show3">показать</b>)</b></u><div id="3" class="b">
<p>Значение 18, 19, 20 установит внешний вид героя на лодку - тёмную, светлую и узкую соответственно. При значении 18 можно заходить в окно героя, 
в случае 19 и 20 это приведёт к критической ошибке (даже простая наводка курсора на изменённого героя), вступление в битву тоже вызовет критическую ошибку во всех трех формах. 
Класс 21,22 представляет собой след от движения лодки игрока, любые вызовы программы на получение класса героя закончатся вылетом игры 
(наведение курсора, заход в окно героя и т.п.). Класс выше 23 - почти то же, что и 21, но со следующим по номеру флагом игрока поверх флага текущего. 
В общем, идёт по DEF'ам из <i class="file">H3sprite.lod</i>, добавляя/заменяя героя новой анимацией.<br>
<u>Пример</u>:
Давайте узнаем, отталкиваясь от класса героя, кто он по жизни ;-)
<script type="erm">!!HE-1:B0/?z1 B2/?v2;   получаем имя (в z1) и класс (в v2) текущего героя
!!VRv2:%2;		получаем остаток от деления на 2
!!VRz2&v2=0:S^воина^;	
!!VRz2&v2=1:S^мага^;
!!IF:M^Герой %Z1 выбрал путь %Z2.^;</script></p>
<p>Стоит отметить, что существует возможность изменения названия классов героев, используя возможности <a href="../ERA/index.htm">ERA</a>.<br>
Вот пример готовой функции от <b id="N1">igrik</b>'а: <u onclick="HideIt(44)" class="h">(<b id="show44">показать</b>)</u><div id="44" class="b">
<script type="erm">!?FU(WOG_CreateERMHook);
!!SN:Ex1/1/5083661/(SetHeroClassName1);
!!SN:Ex1/1/5093760/(SetHeroClassName2);
!!SN:Ex1/1/5094903/(SetHeroClassName2);
!!SN:Ex1/1/5119462/(SetHeroClassName3);

!?FU(SetHeroClassName1);
!!SN:X?y1/0; !!VRy2:Sy1 +24;
!!FU(GetHeroClassName):Py2/?y4;
!!VRy3:Sy1 +28; !!UN:Cy3/4/y4;
!!VRy5:Sy1 +32; !!UN:Cy5/4/5083660;

!?FU(SetHeroClassName2);
!!SN:X?y1; !!VRy2:Sy1 +24;
!!FU(GetHeroClassName):Py2/?y4;
!!VRy3:Sy1 +28; !!UN:Cy3/4/y4;

!?FU(SetHeroClassName3);
!!SN:X?y1; !!VRy2:Sy1 +28;
!!FU(GetHeroClassName):Py2/?y4;
!!VRy3:Sy1 +24; !!UN:Cy3/4/y4;

!?FU(GetHeroClassName);
; x1 - указатель на структуру героя
; x2 - адрес ссылки на текст (возвращаем)
!!UN:Cx1/4/?y1; 
!!VRy1:+26; 
!!UN:Cy1/4/?x1; [x1 - теперь номер героя]

** устанавливаем все названия классов героев из ERT
!!SN:E7824928/1/[номер ERT переменной];  [все герои будут иметь название класса из указанной ERT переменной]
!!SN&x1=28:E7824928/1/[номер ERT переменной];  [герой 28 Мальком будет иметь своё название класса из другой ERT переменной]
!!VRx2:Sv1;</script></div></p>
</div></p>
<hr noshade><p>
<font id="red"><b>B3/?$</b></font><br>
Получить оригинальную биографию героя в текстовую переменную (z).<br>
Эта команда всегда будет получать текст по умолчанию, независимо от того, изменяли ли вы текст биографии или нет.<br>
Вы можете использовать только синтаксис получения, как например:
<script type="erm">!!HE0:B3/?z25; записать биографию Оррина в переменную z25</script></p>
<hr noshade><p>
<font id="red"><b>
<a name="C"></a>C0/#1/$2/$3</b></font><br>
Изменить монстров<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – номер слота (0..6)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">тип монстра</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – кол-во монстров
<script type="erm">; Уволить всю армию текущего героя:
!!HE-1:C0/0/-1/0 C0/1/-1/0 C0/2/-1/0 C0/3/-1/0 C0/4/-1/0 C0/5/-1/0 C0/6/-1/0;</script></p>
<hr noshade><p>
<font id="red"><b>C1/#1/$2/$3</b></font><br>
Изменить монстров: все монстры <a target="form" href="../Form/Creature.htm">типа #</a> будут изменены на<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">тип монстра</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – кол-во<br>
<u>
<b onclick="HideIt(4)" class="h">Пример (<b id="show4">показать</b>)</b></u><div id="4" class="b">
<script type="erm">!!HE-1:C1/0/1/d20; добавить 20 юнитов в каждый слот с копейщиками (d20) и заменить всех копейщиков (0) на алебардщиков (1)</script>
Если использовать значение -1 в $2 или 0 в $3, все существа данного типа будут удалены из героя:
<script type="erm">!!HE-1:C1/143/-1/0; прогнать всех Воров из войска</script>
Вы также можете получить кол-во ($3). Нахождение кол-ва позволяет быстро проверить, имеет ли герой существ данного типа, без использования <a href="DO.htm">циклов</a>. 
Но, если герой имеет несколько отрядов, вы получите кол-во существ данного типа в последнем (!) слоте с такими монстрами.
<br>Например, активный герой имеет такое войско:<br> 
<img src="../Img/HArmy.gif" width="466" height="78"><br>
<script type="erm">Тогда команда !!HE-1:C1/94/?y11/?y12; даст нам y11=94, y12=9  - т.е. найдёт нам Циклопов (94)
А, вот команда !!HE-1:C1/96/?y11/?y12; возвратит y11=0, y12=0 - в армии нет Чудищ (96)</script></div></p>
<hr noshade>
<p><i>Расширение синтаксиса для команд C0 и C1:<br>
</i><font id="red"><b>C#/#1/$2/$3/$4/$5</b></font> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – кол-во опыта (по умолчанию 0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $5 – модификатор опыта (по умолчанию 0)<br></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Поддерживаемые значения для $5:<br>
<u><b onclick="HideIt(5)" class="h">Мод 0 (<b id="show5">показать</b>)</b></u><div id="5" class="b">
Используйте этот мод для добавления существ, уже имеющих опыт. Новые существа будут иметь опыт в кол-ве $4, 
но старые существа (если вы &quot;добавляете&quot; монстров) сохранят свой опыт. Результат кол-ва опыта на существо можно подсчитать:<br>
<p id="step"><b>Опыт</b> = [ОпытСтарых * кол-воСтарыхСуществ + ОпытНовых * кол-воНовых] / [кол-воСтарых + кол-воНовых]
<ol type="a">
	<li>Скажем, вы имеет стек Монахов с 1000 опыта (здесь и далее - на существо) и хотите добавить 5 Монахов с опытом 3000.<br>
	Результатом будет: (1000*10+300*5)/15=1666
	<script type="erm">!!HE...:C0/0/d/d100/5000/0; Добавить к 0-ому стеку 100 существ с опытом 5000.</script></li>
	<li>Если вы добавляете существ разных типов, учитывается только опыт новых существ.<br>
	Так, если вы имеете 10 Грифонов с опытом 1000 и хотите добавить 5 Монахов с опытом 3000. Результатом будет 3000;</li>
</ol>
Это используется во избежание проблемы, когда вы сдвигаете стеки из одного слота в другой и опыт смешивается.<br>
Скажем, вы помещаете стек Грифонов в слот 1 и затем изменяете их в Монахов, случайно забыв изменить опыт 
(так что это стек Монахов, хотя система думает, что это стек Грифонов). Теперь, добавляя Монахов, 
система будет думать, что вы изменили тип существ и возьмёт только опыт новых существ.
<blockquote id="Q2"><b>Исключение:</b> если стек ещё не получил опыта, опыт будет усреднён, как будто вы добавили их без смены типа (как мод 1, см. ниже).</blockquote>
<i id="bold">Замечание:</i> не используйте параметр &quot;d&quot; для $4 с модом 0.</p></div>
<u><b onclick="HideIt(6)" class="h">Мод 1 (<b id="show6">показать</b>)</b></u> <div id="6" class="b">
Похож на мод 0, за исключением того, что здесь нет проверки на тип существа. Так что команда всегда работает в соответствии с формулой (выше), 
независимо от опыта и имеющихся у вас существ.<br>
<u>Пример</u>:<br>
Вы хотите установить существ в слоте как Копейщиков и они должны иметь опыт (на существо) предыдущих существ слота (кто бы они ни были) плюс 7 новых существ с 
50 очками опыта.
<script type="erm">!!HE...:C0/1/0/d7/50/1;</script>
<i id="bold">Замечание:</i> не используйте параметр &quot;d&quot; для $4 с модом 1.</div><br>
<u><b onclick="HideIt(7)" class="h">Мод 2 (<b id="show7">показать</b>)</b></u> <div id="7" class="b">
Используйте этот мод для установки опыта для всего стека.<br>
Стек будет иметь $4 опыта.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d/5000/2; Стек имеет 5000 опыта</script>
<i id="bold">Замечание:</i> если вы используете параметр &quot;d&quot; для $4 с модом 2, опыт будет добавлен к существующему (как мод 3, см. ниже).</div><br>
<u><b onclick="HideIt(8)" class="h">Мод 3 (<b id="show8">показать</b>)</b></u> <div id="8" class="b">
Используйте этот мод для добавления опыта стеку.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d/5000/3; Стек получит добавочные 5000 опыта.</script>
Новые существа примут опыт старых существ плюс $4. Опыт не распределяется.<br>
Так, если вы имеете стек с 10 Монахами с 1000 опыта, хотите добавить 5 монахов и добавить 3000 опыта модом 3, результатом будет: 1000+3000=4000.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d5/3000/3; Стек получит +5 существ и +3000 опыта.</script>
Вы также можете использовать этот мод для добавления существ к стеку без уменьшения опыта стека, 
либо изменения типа существ стека, сохраняя опыт неизменным.<br>
Вы можете использовать этот модификатор для временного изменения типа существа, 
так как после возврата в обычное состояние он сохранит весь свой опыт.<u>Пример</u>:
<script type="erm">!!HE...:C0/1/0/d/0/3;
!!HE...:C0/1/99/d/0/3;
!!HE...:C0/1/0/d/0/3;</script>
<i id="bold">Замечание:</i> если вы используете параметр &quot;d&quot; для $4 с модом 3, работа идёт так:<br>
<blockquote>ОпытСтека = СтарыйОпыт+СтарыйОпыт+ДополнительныйОпыт.</blockquote>
Так, если вы имели стек с 2000 опыта, и добавите таким методом 1000 опыта, получится 2000+2000+1000=5000.<br>
Затем, если вы добавите ещё 1000 опыта, получите 5000+5000+1000=11000.</div><br>
<u><b onclick="HideIt(9)" class="h">Мод 4 (<b id="show9">показать</b>)</b></u> <div id="9" class="b">
Используйте этот мод для добавления уровней опыта (рангов) стеку.<br>
Новые существа получат опыт старых существ плюс опыт, равный рангу $4.<br>
Опыт не распределяется.<br>
Так, если вы имели стек из 10 Монахов с 1000 опыта и хотите добавить 5 Монахов и 3 уровня опыта, результат 1000+3ранга = ????<br>
Используем следующие подсчёты:<br>
&nbsp;- мы имеет E опыта<br>
&nbsp;- получаем текущий уровень опыта стек L0<br>
&nbsp;- получаем кол-во опыта E0 для уровня L0<br>
&nbsp;- получаем: dE как E-E0<br>
&nbsp;- мы имеем бонус уровня L<br>
&nbsp;- получаем результирующий уровень L1 как L0+L<br>
&nbsp;- получаем кол-во опыта E1 для уровня L1<br>
&nbsp;- получаем финальный опыт E как E1+dE<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d/5/4; Стек получит +5 уровней опыта.</script>
<i id="bold">Замечание:</i> не используйте параметр &quot;d&quot; для $4 с модом 4.</div><br>
<u><b onclick="HideIt(10)" class="h">Мод 5 (<b id="show10">показать</b>)</b></u> <div id="10" class="b">
Используйте этот мод, если вы улучшаете существ.<br>
Похож на мод 3, но опыт новых существ получается эквивалентным улучшению существ. 
Новый опыт будет старым опытом, помноженный на множитель улучшения плюс бонус опыта.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d/500/5; Стек будет иметь опыта как улучшенный + 500 опыта.</script>
<i id="bold">Замечание:</i> не используйте параметр &quot;d&quot; для $4 с модом 5.</div><br>
<u><b onclick="HideIt(11)" class="h">Мод 10 (<b id="show11">показать</b>)</b></u> <div id="11" class="b">
Используйте этот мод для добавления дополнительных существ с уровнями (рангами) опыта.<br>
Это похоже на мод 0, но $4 показывает дополнительные уровни (ранги) опыта новых существ.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d100/5/10; Добавить к стеку 100 существ с уровнем опыта 5.</script>
<i id="bold">Замечание:</i> не используйте параметр &quot;d&quot; для $4 с модом 10.</div><br>
<u><b onclick="HideIt(12)" class="h">Мод 11 (<b id="show12">показать</b>)</b></u> <div id="12" class="b">
То же, что и мод 10, но независимый от типа существ.<br>
Похож на мод 1, но вы добавляете существ с рангом опыта $4.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/3/d100/5/11; Добавить к стеку 100 существ с рангом опыта 5, но также изменить их тип на Стрелков.</script></div><br>
<u><b onclick="HideIt(13)" class="h">Мод 12 (<b id="show13">показать</b>)</b></u> <div id="13" class="b">
Используйте этот мод для установки уровня опыта (ранга) всему стеку.<br>
Похож на мод 2, но $4 означает уровень опыта (ранг)<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/d/d/5/12; Стек будет иметь 5 уровней (рангов) опыта.</script></div><br>
<u><b onclick="HideIt(14)" class="h">Мод 13 (<b id="show14">показать</b>)</b></u> <div id="14" class="b">
Используйте этот мод для установки эквивалентного процента опыта новому типу существ.<br>
Похож на мод 3, но предполагает, что вы изменили тип существа и опыт новых существ берётся как процент имеющегося у старых существ.<br>
Так, если вы имеет стек Монахов с X опыта и изменяете стек на Ангелов, новым опытом будет X*МаксАнгелов/МаксМонахов+dE, 
где МаксАнгелов это максимальный опыт Ангелов и МаксМонахов - максимальный опыт Монахов, dE - это добавляемый опыт.<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/../d/1000/13; Новый стек получит соответствующий опыт, имеющийся у старого стека, плюс 1000 опыта.</script>
<blockquote><b>НовыйОпыт</b> = [СтарыйОпыт]*[ОпытНовыхСуществНа10Ранге] / [ОпытСтарыхСуществНа10Ранге + ЭкстраОпыт].</blockquote></div><br>
<u><b onclick="HideIt(15)" class="h">Мод 14 (<b id="show15">показать</b>)</b></u> <div id="15" class="b">
Похож на мод 13, но добавляет уровни опыта (ранги).<br>
<u>Пример</u>:
<script type="erm">!!HE...:C0/0/../d/3/14; Новый стек получит соответствующий опыт от старого стека плюс 3 уровня (ранга) опыта.</script></div></p>
<hr noshade><p>
<font id="red"><b>C2/#1/#2/#3</b></font><br>
Добавить новый стек монстров герою:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – <a target="form" href="../Form/Creature.htm">тип монстра</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #2 – кол-во монстров<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #3 = 1 (спросить человека о присоединении, если все слоты заняты), = 0 (использовать ИИ, 
т.е. если все стеки заняты, заменить менее значимый автоматически)</p>
<hr noshade>
<p>
<font id="red"><b>C#1/#2/&hellip;/#14</b></font><br>
Изменить монстров: дать игроку выбор монстров. Используется команда C с 14 параметрами:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 
1 (-1 значит нет)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #2 – кол-во монстров 1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #3 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 2 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #4 – кол-во монстров 2<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #5 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 3 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #6 – кол-во монстров 3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #7 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 4 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #8 – кол-во монстров 4<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #9 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 5 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #10 – кол-во монстров 5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #11 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 6 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #12 – кол-во монстров 6<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #13 – <a target="form" href="../Form/Creature.htm">тип монстра</a> 7 (-1 значит нет)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #14 – кол-во монстров 7<br>
<u>
<b onclick="HideIt(16)" class="h">Пример (<b id="show16">показать</b>)</b></u><div id="16" class="b">
Это будет представлено в виде диалога для помещения существ на карту:
<script type="erm">!!HE-1:C5/6/7/8/9/10/11/12/13/14/15/16/17/18;
!!HE-1:C1/2/-1/0/-1/0/-1/0/-1/0/-1/0/-1/0;</script></div>
</p>
<hr noshade> 
<p>
<font id="red"><b><a name="D"></a>D</b></font><br>
Вызвать диалог для улучшения армии героя (нет параметров)</p>
<hr noshade><p>
<font id="red"><b>
<a name="E"></a>E$</b></font><br>
Установить/проверить/получить опыт героя в $<br>
<a target="form" href="../Form/HeroesLevels.htm">Таблица опыта героев</a></p>
<hr noshade><p>
<font id="red"><b>E$1/$2</b></font><br>
Установить/проверить/получить опыт героя (дополнительный синтаксис)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – очки опыта<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/HeroesLevels.htm">уровень</a> героя<br>
<u>
<b onclick="HideIt(17)" class="h">Пример (<b id="show17">показать</b>)</b></u><div id="17" class="b">
<script type="erm">!!HE-1:Ed/d2; - добавить герою 2 уровня
При этом фактического получения уровня не происходит.</script></div></p>
<p><font id="red"><b>E$1/$2/1</b></font><br>
То же, что и HE:E$1/$2, но без обновления. Для стандартного синтаксиса происходит обновление, даже при простой проверке.</p>
<hr noshade><p>
<font id="red"><b>
<a name="F"></a>F$1/$2/$3/$4</b></font><br>
Установить/проверить/получить первичные навыки<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – атака<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – защита<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – сила магии<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – знания</p>
<hr noshade><p>
<font id="red"><b>F?$1/?$2/?$3/?$4/1</b></font><br>
Дополнительный синтаксис для проверки первичных навыков. Добавьте /1 в конец команды, и получите значения без влияний артефактов.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – атака<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – защита<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – сила магии<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – знания<br>
Вы можете использовать только синтаксис получения или проверки.<br>
<u><b onclick="HideIt(40)" class="h">Пример (<b id="show40">показать</b>)</b></u><div id="40" class="b">
<script type="erm">!!HE-1:F?v100/?v101/?v102/?v103/1;</script></div>
Команда отнимает только стандартные значения артефактов. Если артефакт был изменен с помощью скрипта, возможно некорректное получение значений.<br>
Также вы можете установить значения, но ничего не произойдёт.</p>
<hr noshade><p>
<font id="red"><b>
<a name="G"></a>G$</b></font><br>
Установить начальные очки передвижения героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – начальные очки передвижения<br>
Если вы установите параметры <a href="#W">HE:W</a> и HE:G одинаковыми, вы сможете копать Грааль.</p>
<hr noshade><p>
<font id="red"><b>
<a name="H"></a>H$1/$2/$3/$4</b></font><br>
Установить армию нанимаемого героя.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – номер слота (0, 1, 2)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">тип монстра</a> (-1 – нет монстра)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – мин. кол-во монстров<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – макс. кол-во монстров (может быть равно $3 для определённого числа)<br>
Команда может установить армию героя, которого нет в таверне на данный момент ни у одного из игроков. 
В случае, если он находится в таверне, никаких изменений в его стартовой армии не произойдёт до следующей недели.<br>
<u>
<b onclick="HideIt(18)" class="h">Пример (<b id="show18">показать</b>)</b></u><div id="18" class="b">
<script type="erm">!#HE0:H0/98/3/3 H1/-1/2/2 H2/-1/0/0; Установить армию Оррина на Гноллов в начале игры
Команду можно выполнить в любое время игры.</script></div></p>
<hr noshade><p>
<font id="red"><b>
<a name="I"></a>I$</b></font><br>
Установить/проверить/получить кол-во маны.<br>
Используйте параметр &quot;d&quot; для упрощения изменения, если вы хотите добавить или отнять ману.<br>
Кол-во маны может быть отрицательным.<br>
<u>
<b onclick="HideIt(24)" class="h">Пример (<b id="show24">показать</b>)</b></u><div id="24" class="b">
<script type="erm">!!HE-1:Id-1; забрать у текущего героя 1 очко маны</script></div>
</p>
<p><font id="red"><b>I$/1</b></font><br>
То же, что и HE:I$, но без обновления. В стандартном синтаксисе вызывает обновление даже если вы делали проверку.</p>
<hr noshade><p>
<font id="red"><b>
<a name="K"></a>K</b></font><br>
Немедленно убить героя (к примеру, при посещении колодца - упасть в него :) )</p>
<p><font id="red"><b>K1</b></font><br>
То же, что и HE:K, но без обновления</p>
<hr noshade><p>
<font id="red"><b>
<a name="L"></a>L#^Портрет.pcx^</b></font><br>
Установить портрет героя из внешних файлов<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # = 1 – установить маленький портрет – <i class="file">файл.pcx</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # = 2 – установить большой портрет – <i class="file">файл.pcx</i><br>
<u><b onclick="HideIt(19)" class="h">Комментарии (<b id="show19">показать</b>)</b></u> <div id="19" class="b">
<p><i class="file">Файл.pcx</i> будет искаться в директории <i class="file">DATA</i>, но вы можете изменить поддиректорию.<br>
Например: <i class="file">^p\name.pcx^</i> - в папке <i class="file">p</i> директории <i class="file">DATA</i>. 
Или <i class="file">^..\maps\1.pcx^</i> - в директории <i class="file">Maps</i> в игровой папке.<br>
<b>ВАЖНО!</b> Полная длина имени файла не может иметь более 12 символов (вместе с путём к папке: точки и слэши учитываются).<br>
Вы также можете установить портрет из файла <i class="file">DATA\H3bitmap.lod</i>, просто указав полное имя портрета.<br>
<u>Примеры</u>:
<script type="erm">!!HE-1:L1^..\Mods\WoG\Data\p\1.pcx^; слишком длинный путь к портрету вызывет ошибку
...
!!HE18:L1^HPS045WZ.pcx^ L2^HPL045WZ.pcx^; поставить Енове лицо Солмира</script>
Экран будет обновлен автоматически, если вы измените портрет героя.<br>
<u>Требования к картинке</u>: <i>256 цветов; размеры:&nbsp; 58&times;64 (большой), 48&times;32 (малый)</i></p>
<p>Стоит отметить, что существует возможность получения портретов героя, используя возможности <a href="../ERA/index.htm">ERA</a>.<br>
Вот пример готовой функции для этого: <u onclick="HideIt(42)" class="h">(<b id="show42">показать</b>)</u>
<div id="42" class="b">
<script type="erm">; получение портретов героя в указанные z-переменные

!?FU(Hero_GetPortret_Names); 
; x1 - номер героя
; x2 - номер Z переменной для записи малого портрета
; x3 - номер Z переменной для записи большого портрета
!!SN:E7411341/1/x1;
!!VRy10:Sv1 +52;
!!UN:Cy10/1/?y11;
!!VRx1&y11>=0:Sy11;
!!VRx1&y11<0:S256 +y11;
!!UN:C6806760/4/?y1;
!!VRzx2:S^^;
!!VRzx3:S^^;
!!VRx1:*92 +y1 +48;
!!UN:Cx1/4/?y2;
!!VRx1:+4;
!!UN:Cx1/4/?y3;
!!VRx2:*512+9597416;
!!VRx3:*512+9597416;
!!DO(Hero_GetPortret_Names_CopyF)/1/512/1:Py2/x2 Py3/x3;


!?FU(Hero_GetPortret_Names_CopyF); 
!!UN:Cx1/1/?y1 Cx2/1/y1;
!!VRx16&y1=0:S600;
!!VRx1:+1;
!!VRx2:+1;</script></div></p>
</div></p>
<hr noshade><p>
<font id="red"><b>L0/$</b></font><br>
Установить герою портрет, как у <a target="form" href="../Form/NumberHeroes.htm">героя $</a></p>
<hr noshade><p>
<a name="L3"></a><font id="red"><b>L3/$</b></font><br>
Восстановить оригинальные портреты<br>
<u>Пример</u>:
<script type="erm">!!HE18:L3/d; вернуть Енове родной облик</script></p>
<hr noshade><p>
<font id="red"><b>L4/$</b></font><br>
Установить оба портрета из игры от <a target="form" href="../Form/NumberHeroes.htm">героя $</a></p>
<hr noshade><p>
<font id="red"><b>L5/$1/$2</b></font><br>
Установить портрет героя из переменной<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – текстовая переменная (z) для большой картинки (0 – не менять)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – текстовая переменная (z) для маленькой картинки (0 – не менять)</p>
<hr noshade><p>
<font id="red"><b>
<a name="M"></a>M#1/$2</b></font><br>
Установить/проверить/получить статус заклинания у героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – <a target="form" href="../Form/Spell.htm">заклинание</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – значение (0 = удалить, 1 = дать (при проверке на присутствие 1 = есть, 0 = нет))<br>
<b><u onclick="HideIt(20)" class="h">Комментарий (<b id="show20">показать</b>)</u></b><div id="20" class="b">
Для проверки, изучено/получено заклинание или именно изучено, существуют 2 метода:
<ol><li>Вы можете проверить на заклинание, которое герой изучил ИЛИ имеет на свитке или артефакте с заклинанием, 
используя<b id="erm"><font class="re">!!HE</font>:M#/?$</b>.<br>
В любом случае, переменная станет = 1, если герой имеет заклинание.</li>
<li>Вы можете проверить на заклинание, которое выучено героем, но НЕ со свитка или артефакта, 
используя <b id="erm"><font class="re">!!HE</font>:M=#/1</b>.<br>
Флаг 1 будет установлен на Истину (1), если герой изучил заклинание.<br>
Если герой знает заклинание благодаря свитку/артефакту, флаг 1 будет установлен на Ложь (0).</li>
</ol></div></p>
<hr noshade><p>
<font id="red"><b><a name="N"></a>N?$</b></font><br>
Проверить или получить <a target="form" href="../Form/NumberHeroes.htm">номер героя</a>.<br>
Не пытайтесь установить номер героя. Это не сработает, или вызовет нестабильность.</p>
<hr noshade><p>
<font id="red"><b>
<a name="O"></a>O$</b></font><br>
Установить/проверить/получить хозяина героя (<a target="form" href="../Form/GamersColor.htm">0..7</a>).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – номер игрока, контролирующего героя.<br>
Если героя нет на карте, или он не нанят, хозяин -1.<br>
<b><u onclick="HideIt(21)" class="h">Комментарии (<b id="show21">показать</b>)</u></b>
<div id="21" class="b">Если вы попытаетесь дать героя игроку, уже имеющему 8 активных 
героев, команда будет просто отменена. <a href="OW.htm#H">Проверьте</a> героев игрока для гарантии того, что передача завершится успешно.<br>
Используя второй фантомный параметр в этой команде (например, <b id="erm"><font class="re">!!HE</font>..:O5/1</b>), 
вы мгновенно поменяете хозяина героя. Вы можете использовать это для установки незанятого героя для защиты нейтральных монстров, 
но убедитесь в возвращении к хозяину -1 после битвы. Если вы измените хозяина ненанятого героя путём временного хозяина (от 0 до 7), 
это может быть узнано через HE:O, но <a href="BA.htm#o">!!BA:O</a> будет получать значение -1.</div></p>
<hr noshade><p>
<font id="red"><b>
<a name="P"></a>P$1/$2/$3</b></font><br>
Установить/проверить/получить координаты героя (если установить координаты, это будет что-то вроде телепорта). 
Также вы можете &quot;вытащить&quot; в игру ненанятого героя, указав координаты его появления и затем назначив ему хозяина.<br>
<i>Расширение синтаксиса:</i><br>
<font id="red"><b>P$1/$2/$3/$4</b></font><br>
Переместить героя противника (не вашего цвета) со звуком и операцией обновления:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; если $4&lt;&gt;0 – переместить героя со звуком и обновлением (аля Телепорт)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; если $4 = 0 – старый стиль (герой немедленно перемещается на точку)<br>
<u><b onclick="HideIt(41)" class="h">Комментарии (<b id="show41">показать</b>)</b></u><div id="41" class="b">
<ul><li>Старый стиль команды (без $4) <b id="erm"><font class="re">!!HE</font>..:P$1/$2/$3;</b> работает как <b id="erm"><font class="re">!!HE</font>..:P$1/$2/$3/0;</b></li>
<li>Указанное число для $4 будет воспринято игрой как <a target="form" href="../Form/GamersColor_bit.htm">биты игроков</a>, 
которым будет открыта точка назначения вместе с телепортированным героем.</li></ul></div></p>
<hr noshade><p>
<font id="red"><b>
<a name="R"></a>R0/$</b></font><br>
Установить/проверить/получить мораль героя (до следующей битвы)</p>
<hr noshade><p>
<a name="R1"></a><font id="red"><b>R1/$</b></font><br>
Установить/проверить/получить удачу героя (до следующей битвы)</p>
<hr noshade><p>
<a name="R2"></a><font id="red"><b>R2/$</b></font><br>
Установить/проверить/получить пол героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 0 – мужчина<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 1 – женщина</p>
<hr noshade><p>
<a name="R3"></a><font id="red"><b>R3/$1</b></font><br>
Установить/проверить/получить доступность героя в таверне для ВСЕХ игроков.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – разрешить (1) или запретить (0) героя для найма<br>
<i>Расширение синтаксиса:</i><br>
<font id="red"><b>R3/$1/$2</b></font><br>
Установить/проверить/получить доступность героя в таверне для каждого игрока.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/GamersColor.htm">игроки</a>, которые могут нанять<br>
$2 имеет значение, только если вы разрешили героя.</p>
<hr noshade><p>
<a name="R4"></a><font id="red"><b>R4/$</b></font><br>
Установить/проверить/получить возможность расстановки войск в начале боя при наличии тактики.<br>
Пример команды - кнопка внизу справа в окне героя.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $=1 – разрешить<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $=0 – запретить</p>
<hr noshade><p>
<a name="R5"></a><font id="red"><b>R5/$</b></font><br>
Установить максимум морали<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 0 – не установлена<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 1 – установлена</p>
<hr noshade><p>
<a name="R6"></a><font id="red"><b>R6/$</b></font><br>
Установить максимум удачи<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 0 – максимальная удача не дана<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = 1 – максимальная удача дана</p>
<hr noshade>
<p><a name="R7"></a><font id="red"><b>R7/$</b></font><a href="../Cont/TE.htm" title="Работает только с HoMM3:TE или позднее.."><img src="../Img/te.gif" class="TE"></a><br>
Установить модификатор посещённого объекта, временно меняющего параметры героя.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ = <a href="../Form/HE_R.htm" target="form">двоичное слово, битовая маска</a><br>
<u><b onclick="HideIt(22)" class="h">Комментарий (<b id="show22">показать</b>)</b></u><div id="22" class="b">
В большинстве случаев, установка или очистка этих бит не изменит удачу, мораль, очки хода или магии - она лишь установит 
(либо очистит) запись о посещении героем объекта в данном периоде, например, на этой неделе, до следующей битвы, и т.д. 
Команда установит или очистит текст, ассоциируемый с посещением этого объекта, если вы кликнете на удаче или морали в окне героя 
(например, &quot;Посещение храма +1&quot;), но вы по-прежнему будете должны установить временную удачу или мораль командами HE:R0 и HE:R1.</div></p>
<hr noshade><p>
<a name="Ref"></a><font id="red"><b>R#1/$/#2</b></font><br>
Команда обновления (для всех команд HE:R)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – номер команды R<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – значение<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #2 – флаг обновления<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; = 0 – нет (по умолчанию)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; = 1 – да<br>
Экран приключений не обновляется автоматически после команд HE:R. 
Если вы хотите обновить его, используйте этот синтаксис с флагом &quot;обновить&quot; (#2 = 1)</p>
<hr noshade><p>
<a name="S"></a><font id="red"><b>S$</b></font><br>
Установить/проверить кол-во вторич.навыков для показа.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – кол-во навыков, которые будут показаны (0..8)<br>
Если вы хотите показывать лишь один навык, сначала поменяйте его позицию в слот 1 и затем ограничьте кол-во показываемых навыков одним с помощью этой команды.</p>
<hr noshade><p>
<font id="red"><b>S#1/$2</b></font><br>
Установить/проверить/получить вторичные навыки<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #1 – <a target="form" href="../Form/SecondarySkill.htm">номер навыка</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – уровень навыка (0 – нет, 1 – базовый, 2 – продвинутый, 3 – эксперт).<br>
Вы можете установить все вторичные навыки (28) сразу, но показываться в экране героя будут только первые 8.<br>
<u><b onclick="HideIt(45)" class="h">Дополнительно (<b id="show45">показать</b>)</b></u><div id="45" class="b">
Используя низкоуровневую команду <a href="../Rec/UN.htm#C">UN:C</a> мы может предоставить возможность программно изучать героем все 28 навыков:
<script type="erm">!!UN:C5091278/1/27 C5121386/1/27; [повышение уровня]
!!UN:C4881872/1/27; [посещение хижины ведьмы]
!!UN:C6229127/1/27 C6229840/1/27; [университет]</script>
</div>
Также, вы можете <a href="../Cont/SSchange.htm">менять параметры навыка</a> установкой иных значений от указанных в $2.<br>
<i>Расширенный синтаксис:</i><br>
<font id="red"><b>S$1/$2/1</b></font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – номер в окне навыков героя (0 = нет, 1..8 = номер слота)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – номер навыка (<a target="form" href="../Form/SecondarySkill.htm">0..27</a>)<br>
<u><b onclick="HideIt(23)" class="h">Комментарий (<b id="show23">показать</b>)</b></u> <div id="23" class="b">
Вы можете использовать три вариации синтаксиса:
<script type="erm">!!HE#:S?#1/#2/1; - узнать, в каком слоте показывается навык #2 в переменную #1
!!HE#:S#1/?#2/1; - узнать, какой навык находится в слоте #1 в переменную #2
!!HE#:S#1/#2/1; - установить слот #1 на показ навыка #2</script>
В последнем случае, если другие навыки занимают этот слот, навык останется без слота. 
Вы можете использовать эту команду дважды для смены позиций двух навыков.<br>
Когда вы устанавливаете навыки этой командой, вы должны следовать следующим правилам:
<ul id="T0"><li>вы можете двигать любые два показывающихся навыка для смены их позиций</li>
<li>вы <i>не должны</i> устанавливать навык для показа, если он ниже базового уровня (нет навыка)</li>
<li>вы должны установить навыки для показа в определённом порядке (без пустых мест).</li></ul>
Следовательно, вы не можете использовать команду для скрытия уже показывающихся навыков. Вы также не можете показать навык, если герой не знает его. 
Попытка это сделать вызовет &quot;фантомный&quot; навык (обычно Базовая Мудрость), что повлечёт вылет из игры при клике на ней.</div></p>
<hr noshade><p>
<font id="red"><b>
<a name="T"></a>T$1/$2/$3/$4/$5</b></font><br>
Вызвать битву с одним типом монстров<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – X<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – Y<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – L<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – <a target="form" href="../Form/Creature.htm">тип монстров</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $5 – кол-во монстров<br>
X, Y и L используются только для типа почвы и соответствующих бонусов.</p>
<hr noshade><p>
<font id="red"><b>
<a name="U"></a>U$1/$2/$3</b></font><br>
Установить/проверить/получить позицию и радиус патрулирования для ИИ. Центр патруля X = $1, Y = $2 (уровень фиксирован). 
Радиус будет установлен в $3 (освободить героя от патруля можно установкой $3 = -1)</p>
<hr noshade><p>
<font id="red"><b><a name="V"></a>V#1/$2</b></font><br>
Установить/проверить/получить, посещал ли герой объекты <a target="form" href="../Form/HE_V.htm">типа #1</a> 
($2 используется как <a target="form" href="../Form/HEX.htm">битовая</a> маска: 1 для первого объекта, 2 для второго, 4 для третьего и т.д.)<br>
<i>Расширение синтаксиса:</i><font id="red"><b><br>
V#1/#2/$3<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</b></font>#1 – <a target="form" href="../Form/HE_V.htm">тип объекта</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #2 – номер объекта (0..31)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – посещено героем (1) или нет (0)<br>
<u>
<b onclick="HideIt(25)" class="h">Пример (<b id="show25">показать</b>)</b></u>
<div id="25" class="b">
<script type="erm">!!HE-1:V0/0/0; - установить, что Камень знаний под номером 0 не был посещён героем
!!HE-1:V6/2/0; - установить, что Библиотека Просвещения номер 2 не была посещена героем
!!HE-1:V5/2; - установить, что все Деревья Знаний, кроме второго, будут не посещёнными героем (только второе посещено)</script></div></p>
<hr noshade><p>
<font id="red"><b><a name="W"></a>W$</b></font><br>
Изменить/получить очки движения героя<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $ – очки для изменения (W0, Wd-10, W?i, W&gt;=100&hellip;)<br>
<u><b onclick="HideIt(26)" class="h">Комментарий (<b id="show26">показать</b>)</b></u><div id="26" class="b">
Это число не кол-во шагов, которые может совершить герой, а значительно бо&#x301;льшее число (обычно между 1500 и 2000, зависит от скорости войск), 
устанавливаемой игрой автоматически. Проблематично подсчитать варианты бонусов почв и пенальти (плюс Поиск Пути, Логистика, Сапоги-Скороходы и т.п.). 
На траве со смешанными существами 1 шаг равен 100 очкам движения героя.<br>
В Дыхании Смерти и в WoG, герои компьютера получают дополнительные очки движения на высоких уровнях сложности. 
На Эксперте они получают 125 дополнительных очков, на Невозможном - 75. </div></p>
<p><font id="red"><b>W$/1</b></font><br>
То же, что и HE:W$, но без обновления. В стандартном синтаксисе обновление вызывается даже если вы проводите проверку.</p>
<hr noshade><p>
<font id="red"><b><a name="X"></a>X#1/$2/$3/$4/$5/$6/$7</b></font><br>
Изменить специальность героя. Установить/проверить/получить все спец. установки.<br>
Типы специальностей (#1):<br>
<b onclick="hidepic(27)" class="h"><u>#1 = 0</u> – спец по вторичному навыку</b><div id="27" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/SecondarySkill.htm">номер вторичного навыка</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются.</div><br>
<b onclick="hidepic(28)" class="h"><u>#1 = 1</u> – спец по существам</b><div id="28" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">тип существ</a>&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(29)" class="h"><u>#1 = 2</u> – спец по ресурсам</b><div id="29" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Resource.htm">тип ресурса</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(30)" class="h"><u>#1 = 3</u> – спец по заклинанию</b><div id="30" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Spell.htm">номер заклинания</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(31)" class="h"><u>#1 = 4</u> – экстраспец по существам</b><div id="31" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">тип существа</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; $3 – бонус атаки<br>
&nbsp;&nbsp;&nbsp;&nbsp; $4 – бонус защиты<br>
&nbsp;&nbsp;&nbsp;&nbsp; $5 – бонус урона<br>
&nbsp;&nbsp;&nbsp;&nbsp; $6&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(32)" class="h"><u>#1 = 5</u> – скорость</b><div id="32" class="b">&nbsp;&nbsp;&nbsp;&nbsp; $2 = 2 <br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(33)" class="h"><u>#1 = 6</u> – спец по улучшениям</b><div id="33" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 – <a target="form" href="../Form/Creature.htm">существо 1</a> для улучшения<br>
&nbsp;&nbsp;&nbsp;&nbsp; $6 – <a target="form" href="../Form/Creature.htm">существо 2</a> для улучшения<br>
&nbsp;&nbsp;&nbsp;&nbsp; $7 – <a target="form" href="../Form/Creature.htm">существо</a> улучшенное<br>
&nbsp;&nbsp;&nbsp;&nbsp; $3&hellip;$5 игнорируются</div><br>
<b onclick="hidepic(34)" class="h"><u>#1 = 7</u> – спец по драконам</b><div id="34" class="b">
&nbsp;&nbsp;&nbsp;&nbsp; $2 = 0<br>
&nbsp;&nbsp;&nbsp;&nbsp; $3 – бонус атаки<br>
&nbsp;&nbsp;&nbsp;&nbsp; $4 – бонус защиты<br>
&nbsp;&nbsp;&nbsp;&nbsp; $5&hellip;$7 игнорируются</div><br>
<b onclick="hidepic(35)" class="h"><u>#1 = 8</u> – экстра-ВоГ – специальность</b><div id="35" class="b">
&nbsp;&nbsp;&nbsp; $2 =<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 - Вуаль Тьмы<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 - Строитель<br>
&nbsp;&nbsp;&nbsp; $3&hellip;$7 игнорируются</div><br><br>
<u><b onclick="HideIt(36)" class="h">Комментарий (<b id="show36">показать</b>)</b></u>
<div id="36" class="b">Вы можете использовать параметр &quot;d&quot; для игнорируемых или неизменяемых вами настроек:
<script type="erm">!!HE#:X8/2/d/d/d/d/d; или так !!HE#:X8/2;</script>
Для проверки текущих настроек используйте:
<script type="erm">!!HE#:X?y5/?y6/?y7/?y8/?y9/?y10/?y11;</script></div></p>
<hr noshade><p>
<font id="red"><b><a name="Y"></a>Y$1/$2/$3/$4</b></font><br>
Благословения и проклятья.&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $1 – номер благословения/проклятья (<a target="form" href="../Form/Bless.htm">1..65</a>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $2 – сила заклятья (не используется для слепоты и блокировки слота)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $3 – продолжительность в днях<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $4 – что с ним сделать (0 – удалить, 1 – дать, 2 – добавить/убавить)<br>
<script type="erm">!!HE#:Y0/0/0/3; - удаление всех проклятий и благословений</script>
<u><b onclick="HideIt(37)" class="h">Комментарий (<b id="show37">показать</b>)</b></u><div id="37" class="b">
Каждый герой может иметь только одно заклятье каждого типа.<br>
Так, когда вы добавляете или отнимаете (отнимание - добавление отрицательного значения), 
это означает, что сила и продолжительность будут изменены на сумму старого и нового значений. 
Если вы удаляете проклятье, параметр силы и продолжительности не имеет значения.<br>
<spn id="step">Проклятье заблокированного слота.</span><br>
$2 - номер слота для блока (-1 = случайный слот).<br>
Если слот содержит артефакт, он будет скрыт и появится на том же месте по окончанию действия проклятья. 
Но (!) при удалении проклятья &quot;закрытый слот&quot; не разблокируется. 
Если же использовать команду снятия всех проклятий, всё в порядке.<br>
Таблица слотов непохожа ни на одну другую таблицу, результаты получены экспериментальным путём - <a href="../Form/AP3.htm" target="form">номер слота</a><br>
Если закрыть боевую машину, и она уже есть у героя, то закроется один из слотов разное (1..3) в зависимости от номера боевой машины. 
Причём внешне он будет выглядеть как пустой слот, но по окончанию проклятья артефакт вернётся. 
Если во время действия проклятья &quot;поднять&quot; машину в инвентаре, под ней появится замок, и вы не сможете установить её обратно.</div></p>
<hr noshade><p>
<font id="red"><b><a name="Z"></a>Z?$</b></font><a href="../ERA/index.htm" title="Работает только с ERA.."><img src="../Img/era.gif" class="TE"></a><br>
Команда возвращает адрес памяти <a href="../Form/AdvHero.htm" target="form">структуры указанного героя</a>.<br>
<b><u onclick="HideIt(43)" class="h">Пример (<b id="show43">показать</b>)</u></b><div id="43" class="b">
<script type="erm">!?FU(Hero_Param);
; Образец функции работы с параметрами героя:
; x1 - номер героя
; x2 - смещение до заданного параметра
; x3 - кол-во байт (1, 2, 4)
; x4 - возвращаемое значение
; x5 - режим работы ф-ции (0=set/1=get)
!!HEx1:Z?y1;
!!UN&x5=0:Cy1/x2/x3/x4; set-режим
!!UN&x5=1:Cy1/x2/x3/?x4; get-режим

; С помощью этой функции можно узнать общее кол-во артефактов Аш (x1=61) в рюкзаке (x2=980; x3=1байт)
!!FU(Hero_Param):P28/980/1/?y10/1; результат занесётся в y10

; А так можно заставить летать Аш (x2=274; x3=4байта) без всяких условностей
!!FU(Hero_Param):P28/274/4/3/0; здесь "3" это эксп.ур. колдовства</script></div></p>
<hr noshade>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

</DIV>
<script src="../erm.js"></script></body></html>